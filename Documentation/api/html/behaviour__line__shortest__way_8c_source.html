<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>c't-Bot: behaviour_line_shortest_way.c Quellcode</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">c't-Bot
   &#160;<span id="projectnumber">1818</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Erzeugt von Doxygen 1.7.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Hauptseite</span></a></li>
      <li><a href="pages.html"><span>Zus√§tzliche&#160;Informationen</span></a></li>
      <li><a href="annotated.html"><span>Datenstrukturen</span></a></li>
      <li class="current"><a href="files.html"><span>Dateien</span></a></li>
      <li><a href="dirs.html"><span>Verzeichnisse</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Auflistung&#160;der&#160;Dateien</span></a></li>
      <li><a href="globals.html"><span>Datei-Elemente</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_50e348be376545f1764a2303ce570900.html">bot-logic</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">behaviour_line_shortest_way.c</div>  </div>
</div>
<div class="contents">
<a href="behaviour__line__shortest__way_8c.html">gehe zur Dokumentation dieser Datei</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * c&#39;t-Bot</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it</span>
<a name="l00005"></a>00005 <span class="comment"> * and/or modify it under the terms of the GNU General</span>
<a name="l00006"></a>00006 <span class="comment"> * Public License as published by the Free Software</span>
<a name="l00007"></a>00007 <span class="comment"> * Foundation; either version 2 of the License, or (at your</span>
<a name="l00008"></a>00008 <span class="comment"> * option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be</span>
<a name="l00010"></a>00010 <span class="comment"> * useful, but WITHOUT ANY WARRANTY; without even the implied</span>
<a name="l00011"></a>00011 <span class="comment"> * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR</span>
<a name="l00012"></a>00012 <span class="comment"> * PURPOSE. See the GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> * You should have received a copy of the GNU General Public</span>
<a name="l00014"></a>00014 <span class="comment"> * License along with this program; if not, write to the Free</span>
<a name="l00015"></a>00015 <span class="comment"> * Software Foundation, Inc., 59 Temple Place, Suite 330, Boston,</span>
<a name="l00016"></a>00016 <span class="comment"> * MA 02111-1307, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="bot-logic_8h.html" title="High-Level-Routinen fuer die Steuerung des c&#39;t-Bots.">bot-logic/bot-logic.h</a>&quot;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#ifdef BEHAVIOUR_LINE_SHORTEST_WAY_AVAILABLE</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="available__screens_8h.html" title="Die Schalter fuer sichtbare Screens finden sich hier.">ui/available_screens.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="pos__store_8h.html" title="Implementierung eines Positionsspeichers mit den ueblichen Stackbefehlen push(), pop() und FIFO-Befeh...">pos_store.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="rc5-codes_8h.html" title="RC5-Fernbedienungscodes.">rc5-codes.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="math__utils_8h.html" title="Hilfsfunktionen fuer mathematische Dinge, architekturunabhaengig.">math_utils.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="display_8h.html" title="Routinen zur Displaysteuerung.">display.h</a>&quot;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="comment">//#define DEBUG_BEHAVIOUR_LINE_SHORTEST_WAY // Schalter fuer Debug-Code</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#define STACK_SIZE 32 </span>
<a name="l00049"></a>00049 <span class="preprocessor">#if STACK_SIZE &gt; POS_STORE_SIZE</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#undef STACK_SIZE</span>
<a name="l00051"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a6423a880df59733d2d9b509c7718d3a9">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define STACK_SIZE POS_STORE_SIZE</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00054"></a>00054 <span class="preprocessor">#ifndef LOG_AVAILABLE</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#undef DEBUG_BEHAVIOUR_LINE_SHORTEST_WAY</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#ifndef DEBUG_BEHAVIOUR_LINE_SHORTEST_WAY</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#undef LOG_DEBUG</span>
<a name="l00059"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_DEBUG(...) {}</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00063"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a86b8f766a22acc34aa90deefa94c0524">00063</a> <span class="preprocessor">#define OPTIMAL_LINE_BEHAVIOUR_VERSION 3</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00067"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a2fda09550bbd123dc08a9a61222ef41f">00067</a> <span class="preprocessor">#define CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00069"></a>00069 <span class="preprocessor">#if FOLLOW_LINE_VERSION != OPTIMAL_LINE_BEHAVIOUR_VERSION</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#warning &quot;Optimal nur mit Version 3 des Linienfolgers&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a1ff0d2239e3e8bf51a95a64d1aee6a30">00074</a> <span class="preprocessor">#define START_SIDEWISH  1</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span>
<a name="l00077"></a>00077 <span class="keyword">static</span> int8_t lineState = 0;
<a name="l00078"></a>00078 
<a name="l00080"></a>00080 <span class="preprocessor">#ifdef PC</span>
<a name="l00081"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a476b0594be1b0fc5c814279cc18e00d5">00081</a> <span class="preprocessor"></span><span class="preprocessor">#define GROUND_GOAL_DEF      GROUND_GOAL</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span><span class="preprocessor">#define GROUND_GOAL_DEF      0x9AB  // damit es beim echten Bot nicht zu Fehlausloesungen kommt</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00087"></a>00087 <span class="keyword">static</span> <a class="code" href="structpos__store__t.html">pos_store_t</a> * pos_store = NULL;
<a name="l00088"></a>00088 
<a name="l00090"></a>00090 <span class="keyword">static</span> position_t pos_store_data[<a class="code" href="behaviour__drive__area_8c.html#a6423a880df59733d2d9b509c7718d3a9">STACK_SIZE</a>];
<a name="l00091"></a>00091 
<a name="l00094"></a>00094 <span class="keyword">static</span> uint8_t border_side_l_fired = 0;
<a name="l00095"></a>00095 
<a name="l00098"></a>00098 <span class="keyword">static</span> uint8_t border_side_r_fired = 0;
<a name="l00099"></a>00099 
<a name="l00101"></a>00101 <span class="keyword">static</span> int8_t sidewish = <a class="code" href="behaviour__line__shortest__way_8c.html#a1ff0d2239e3e8bf51a95a64d1aee6a30">START_SIDEWISH</a>;
<a name="l00102"></a>00102 
<a name="l00105"></a>00105 <span class="keyword">static</span> uint8_t way_back = 0;
<a name="l00106"></a>00106 
<a name="l00108"></a>00108 <span class="keyword">static</span> int8_t direction_counter = 0;
<a name="l00109"></a>00109 
<a name="l00111"></a>00111 <span class="keyword">static</span> int8_t crosstype = 0;
<a name="l00112"></a>00112 
<a name="l00115"></a>00115 <span class="keyword">static</span> uint8_t go_stack_way = 0;
<a name="l00116"></a>00116 
<a name="l00118"></a>00118 <span class="keyword">static</span> uint8_t crossing_reached = 0;
<a name="l00119"></a>00119 
<a name="l00121"></a>00121 <span class="keyword">static</span> uint8_t greencounter = 0;
<a name="l00122"></a>00122 
<a name="l00124"></a>00124 <span class="keyword">static</span> int16_t lastpos_x = 0;
<a name="l00125"></a>00125 <span class="keyword">static</span> int16_t lastpos_y = 0;
<a name="l00126"></a>00126 
<a name="l00128"></a>00128 <span class="preprocessor">#if FOLLOW_LINE_VERSION != OPTIMAL_LINE_BEHAVIOUR_VERSION</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span><span class="preprocessor">  #define DISTCHECK_NEEDED</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00131"></a>00131 <span class="preprocessor"></span>
<a name="l00133"></a>00133 <span class="preprocessor">#ifdef CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00134"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a2eaf636573f1a5ab0cdcb7f06215305d">00134</a> <span class="preprocessor"></span><span class="preprocessor">  #define DISTCHECK_NEEDED</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span>
<a name="l00139"></a><a class="code" href="behaviour__line__shortest__way_8c.html#aa892cb5acbf454ab9b21abc2c7ca002f">00139</a> <span class="preprocessor">#define CHECK_DISTANCE 60</span>
<a name="l00140"></a><a class="code" href="behaviour__line__shortest__way_8c.html#ad083db6023a54557da0db3b81d4d148a">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define CHECK_DISTANCE_QUAD (CHECK_DISTANCE * CHECK_DISTANCE)  // Quadrat der gefahrenen Strecke</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>
<a name="l00142"></a>00142 <span class="comment">/* Zustaende des Verhaltens */</span>
<a name="l00143"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a50818588c9707aa0dbd7b83f2f5f2b4d">00143</a> <span class="preprocessor">#define GO_TO_LINE                0</span>
<a name="l00144"></a><a class="code" href="behaviour__line__shortest__way_8c.html#ade558e02ab2cc8b95d2d04016f8b624f">00144</a> <span class="preprocessor"></span><span class="preprocessor">#define CHECK_LINE                1</span>
<a name="l00145"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a2367b00bfdacd4c2791b0fda6408192c">00145</a> <span class="preprocessor"></span><span class="preprocessor">#define GO_FORWARD                2</span>
<a name="l00146"></a><a class="code" href="behaviour__line__shortest__way_8c.html#ace57a72a89f31fa81257cbea0c608f7c">00146</a> <span class="preprocessor"></span><span class="preprocessor">#define TURN_SIDEWISH_ON_CROSSING 3</span>
<a name="l00147"></a><a class="code" href="behaviour__line__shortest__way_8c.html#ab35135ebd43d0fc05754c4a21e601717">00147</a> <span class="preprocessor"></span><span class="preprocessor">#define GO_FORWARD_AFTER_TURN     4</span>
<a name="l00148"></a><a class="code" href="behaviour__line__shortest__way_8c.html#af95fbf1c704d0465a9cef50721ebb221">00148</a> <span class="preprocessor"></span><span class="preprocessor">#define CHECK_BORDER              5</span>
<a name="l00149"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a0654b41984b22fceed1cdda23abd9205">00149</a> <span class="preprocessor"></span><span class="preprocessor">#define TURN_ON_GREEN             6</span>
<a name="l00150"></a><a class="code" href="behaviour__line__shortest__way_8c.html#aa3676de96e7d1bd81c8b5985f79c193e">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define GOAL_FOUND                7</span>
<a name="l00151"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a29fd18bed01c4d836c7ebfe73a125c3f">00151</a> <span class="preprocessor"></span><span class="preprocessor">#define END                       99</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="comment">/**************************************************************************</span>
<a name="l00156"></a>00156 <span class="comment"> *** Verhalten zum Erkennung einer 180 Grad Drehung ***</span>
<a name="l00157"></a>00157 <span class="comment"> **************************************************************************/</span>
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 <span class="preprocessor">#ifdef DISTCHECK_NEEDED</span>
<a name="l00160"></a>00160 <span class="preprocessor"></span>
<a name="l00166"></a>00166 <span class="keyword">static</span> uint8_t distance_reached(int16_t * last_xpoint,int16_t * last_ypoint) {
<a name="l00167"></a>00167 
<a name="l00168"></a>00168     <span class="comment">// Abstand seit letztem Observerlauf ermitteln</span>
<a name="l00169"></a>00169     uint16_t diff = (uint16_t) <a class="code" href="math__utils_8c.html#a21ef181ca9f0913051fc5e75fb8ae2b7" title="Ermittlung des Quadrat-Abstands zwischen zwei Punkten.">get_dist</a>(<a class="code" href="sensor_8c.html#ac5ae500a2280ad6ed571a99a11954492">x_pos</a>, <a class="code" href="sensor_8c.html#a82663881f9567f6bf0b697b77af08d0d">y_pos</a>, *last_xpoint, *last_ypoint);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="comment">//erst nach gewissem Abstand oder gleich bei noch initialem Wert Mappruefung</span>
<a name="l00172"></a>00172     <span class="keywordflow">if</span> (diff &gt;= <a class="code" href="behaviour__line__shortest__way_8c.html#ad083db6023a54557da0db3b81d4d148a">CHECK_DISTANCE_QUAD</a>) {
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         *last_xpoint = <a class="code" href="sensor_8c.html#ac5ae500a2280ad6ed571a99a11954492">x_pos</a>;
<a name="l00175"></a>00175         *last_ypoint = <a class="code" href="sensor_8c.html#a82663881f9567f6bf0b697b77af08d0d">y_pos</a>;
<a name="l00176"></a>00176         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="preprocessor">#endif // nur wenn gefordert</span>
<a name="l00182"></a>00182 <span class="preprocessor"></span>
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="preprocessor">#ifdef CHECK_REVERSE_BEHAVIOUR  // nur wenn Verhalten anstatt Gruenfeld verwendet werden soll</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>
<a name="l00186"></a>00186 <span class="keyword">static</span> uint8_t reverse_state=0;
<a name="l00187"></a>00187 <span class="keyword">static</span> int16_t last_heading = 0;        
<a name="l00188"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a834b8a9493bf0b697d0ab198a51e6f17">00188</a> <span class="preprocessor">#define CHECK_ANGLE_REV 170           </span>
<a name="l00190"></a>00190 <span class="preprocessor">static uint8_t bot_reverse=0;          </span>
<a name="l00192"></a><a class="code" href="behaviour__line__shortest__way_8c.html#a69af597845fb2e5ca86c16720be9febf">00192</a> <span class="preprocessor">int16_t angle_t=0;</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span>
<a name="l00198"></a><a class="code" href="behaviour__line__shortest__way_8h.html#accf7327bce031854e46c26edf305a154">00198</a> <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#accf7327bce031854e46c26edf305a154">bot_check_reverse_direction_behaviour</a>(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * data) {
<a name="l00199"></a>00199     <span class="keywordflow">switch</span> (reverse_state) {
<a name="l00200"></a>00200     <span class="keywordflow">case</span> 0:
<a name="l00201"></a>00201         last_heading = <a class="code" href="sensor_8c.html#a0bebab40bf945479d36e9190261b5a28">heading_int</a>;
<a name="l00202"></a>00202         reverse_state = 1;
<a name="l00203"></a>00203         bot_reverse = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00204"></a>00204         <span class="comment">//LOG_DEBUG(&quot;-Start Check reverse mit ang %1d&quot;, last_heading);</span>
<a name="l00205"></a>00205         <span class="comment">/* no break */</span>
<a name="l00206"></a>00206     <span class="keywordflow">case</span> 1:
<a name="l00207"></a>00207         <span class="comment">// bei Drehwinkelaenderung und Uberschreitung einer gewissen Groesse (um 180 Grad) feuern</span>
<a name="l00208"></a>00208         <a class="code" href="behaviour__line__shortest__way_8c.html#a69af597845fb2e5ca86c16720be9febf">angle_t</a> = <a class="code" href="math__utils_8c.html#a9c14e14c49d54828861673702c30eeed" title="Berechnet die Differenz eines Winkels zur aktuellen Botausrichtung.">turned_angle</a>(last_heading);
<a name="l00209"></a>00209         <span class="keywordflow">if</span> (<a class="code" href="behaviour__line__shortest__way_8c.html#a69af597845fb2e5ca86c16720be9febf">angle_t</a> &gt; 180)
<a name="l00210"></a>00210             <a class="code" href="behaviour__line__shortest__way_8c.html#a69af597845fb2e5ca86c16720be9febf">angle_t</a> = 360 - <a class="code" href="behaviour__line__shortest__way_8c.html#a69af597845fb2e5ca86c16720be9febf">angle_t</a>;
<a name="l00211"></a>00211 
<a name="l00212"></a>00212         <span class="keywordflow">if</span> (<a class="code" href="behaviour__line__shortest__way_8c.html#a69af597845fb2e5ca86c16720be9febf">angle_t</a> &gt; <a class="code" href="behaviour__line__shortest__way_8c.html#a834b8a9493bf0b697d0ab198a51e6f17">CHECK_ANGLE_REV</a>) {
<a name="l00213"></a>00213             last_heading = <a class="code" href="sensor_8c.html#a0bebab40bf945479d36e9190261b5a28">heading_int</a>;
<a name="l00214"></a>00214             <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;-um Winkel gedreht %1d&quot;</span>, <a class="code" href="behaviour__line__shortest__way_8c.html#a69af597845fb2e5ca86c16720be9febf">angle_t</a>);
<a name="l00215"></a>00215             bot_reverse = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>; <span class="comment">// Kennung muss vom Auswerteverhalten nach Erkennung rueckgesetzt werden</span>
<a name="l00216"></a>00216             return_from_behaviour(data); <span class="comment">// gleich Deaktivierung nach Erkennung entgegengesetzte Richtung</span>
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="keywordflow">break</span>;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="keywordflow">default</span>:
<a name="l00222"></a>00222         <span class="comment">// kommt eigentlich nie hierher, da es solange aktiv ist bis Deaktivierung eintritt (Notaus oder Steuerung vom Verhalten selbst)</span>
<a name="l00223"></a>00223         return_from_behaviour(data);
<a name="l00224"></a>00224         <span class="keywordflow">break</span>;
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00232"></a>00232 <span class="keyword">static</span> <span class="keywordtype">void</span> bot_check_reverse_direction(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * caller) {
<a name="l00233"></a>00233     <span class="comment">// via Override umschalten; Aufruf erfolgt aller x mm gefahrene Strecke, falls Kurve gefahren wurde zum Setzen des neuen Pruefwinkels</span>
<a name="l00234"></a>00234     <a class="code" href="bot-logic_8c.html#a123152ecfcd89545c2603cb3f2e873c9" title="Ruft ein anderes Verhalten auf und merkt sich den Ruecksprung return_from_behaviour() kehrt dann spae...">switch_to_behaviour</a>(caller, <a class="code" href="behaviour__line__shortest__way_8c.html#accf7327bce031854e46c26edf305a154">bot_check_reverse_direction_behaviour</a>, <a class="code" href="bot-logic_8h.html#ac3101d6686d35c952f2a5c8177b3f262" title="Konstante, wenn Verhalten beim Aufruf alte Wuensche ueberschreiben sollen.">BEHAVIOUR_OVERRIDE</a>);
<a name="l00235"></a>00235     reverse_state = 0;
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 <span class="preprocessor">#else</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>
<a name="l00242"></a>00242 <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#accf7327bce031854e46c26edf305a154">bot_check_reverse_direction_behaviour</a>(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * data) {
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 <span class="preprocessor">#endif // CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00245"></a>00245 <span class="preprocessor"></span>
<a name="l00251"></a>00251 <span class="keyword">static</span> <span class="keywordtype">void</span> push_stack_crossing(int8_t crosstype, int8_t <a class="code" href="motor_8c.html#a96703dcd865ea4cfb315cab528b061d8" title="Drehrichtung der Motoren, auch wenn die Speed-Variablen bereits wieder auf Null sind.">direction</a>) {
<a name="l00252"></a>00252     position_t p_temp; <span class="comment">// Stack erlaubt nur Speicherung von Positionstypen</span>
<a name="l00253"></a>00253     p_temp.x = crosstype;
<a name="l00254"></a>00254     p_temp.y = <a class="code" href="motor_8c.html#a96703dcd865ea4cfb315cab528b061d8" title="Drehrichtung der Motoren, auch wenn die Speed-Variablen bereits wieder auf Null sind.">direction</a>;
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="comment">// der eigentliche Push der Kreuzungsinformation</span>
<a name="l00257"></a>00257     <a class="code" href="pos__store_8c.html#a036874299445af76339d8d4d5a75e1dc">pos_store_push</a>(pos_store, p_temp);
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00266"></a>00266 <span class="keyword">static</span> uint8_t pop_stack_crossing(int8_t * crosstype, int8_t * <a class="code" href="motor_8c.html#a96703dcd865ea4cfb315cab528b061d8" title="Drehrichtung der Motoren, auch wenn die Speed-Variablen bereits wieder auf Null sind.">direction</a>) {
<a name="l00267"></a>00267     position_t p_temp; <span class="comment">// Stack erlaubt nur Speicherung von Positionstypen</span>
<a name="l00268"></a>00268     <span class="keywordflow">if</span> (!<a class="code" href="pos__store_8c.html#af507859ead3d3e4775cf01c6d2b800fc">pos_store_pop</a>(pos_store, &amp;p_temp)) {
<a name="l00269"></a>00269         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271     *crosstype = (int8_t) p_temp.x;
<a name="l00272"></a>00272     *direction = (int8_t) p_temp.y;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00283"></a>00283 <span class="keyword">static</span> uint8_t dequeue_stack_crossing(int8_t * crosstype, int8_t * direction) {
<a name="l00284"></a>00284     position_t p_temp; <span class="comment">// Stack erlaubt nur Speicherung von Positionstypen</span>
<a name="l00285"></a>00285     <span class="keywordflow">if</span> (!<a class="code" href="pos__store_8c.html#ab38bb7f7ff5a9c4f0d356e7f07a3397d">pos_store_dequeue</a>(pos_store, &amp;p_temp)) {
<a name="l00286"></a>00286         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00287"></a>00287     }
<a name="l00288"></a>00288     *crosstype = (int8_t) p_temp.x;
<a name="l00289"></a>00289     *direction = (int8_t) p_temp.y;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00292"></a>00292 }
<a name="l00293"></a>00293 
<a name="l00299"></a>00299 <span class="keyword">static</span> uint8_t green_field(uint8_t goalcheck) {
<a name="l00300"></a>00300     <span class="keywordflow">if</span> (crossing_reached &amp;&amp; ((<a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a> &gt; <a class="code" href="behaviour__line__shortest__way_8c.html#a476b0594be1b0fc5c814279cc18e00d5">GROUND_GOAL_DEF</a> - 5 &amp;&amp; <a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a>
<a name="l00301"></a>00301             &lt; <a class="code" href="behaviour__line__shortest__way_8c.html#a476b0594be1b0fc5c814279cc18e00d5">GROUND_GOAL_DEF</a> + 5) || (<a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a> &gt; <a class="code" href="behaviour__line__shortest__way_8c.html#a476b0594be1b0fc5c814279cc18e00d5">GROUND_GOAL_DEF</a> - 5
<a name="l00302"></a>00302             &amp;&amp; <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a> &lt; <a class="code" href="behaviour__line__shortest__way_8c.html#a476b0594be1b0fc5c814279cc18e00d5">GROUND_GOAL_DEF</a> + 5))) {
<a name="l00303"></a>00303 <span class="preprocessor">#ifdef CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00304"></a>00304 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (goalcheck) {  <span class="comment">// nur fuer Zielcheck</span>
<a name="l00305"></a>00305           <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00306"></a>00306         }
<a name="l00307"></a>00307 <span class="preprocessor">#else</span>
<a name="l00308"></a>00308 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (goalcheck) {  <span class="comment">// bei Zielpruefung sofort True</span>
<a name="l00309"></a>00309             <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00310"></a>00310         }
<a name="l00311"></a>00311         <span class="keywordflow">else</span> {
<a name="l00312"></a>00312           greencounter++;
<a name="l00313"></a>00313           <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Gruen erkannt counter %1d, l/r %1d %1d&quot;</span>, greencounter, <a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a>, <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a>);
<a name="l00314"></a>00314           <span class="keywordflow">if</span> (greencounter &gt; 5) {  <span class="comment">// muss mehrmals hintereinander Gruenfeld erkennen um Fehlausloesungen besser zu vermeiden</span>
<a name="l00315"></a>00315               greencounter = 0;
<a name="l00316"></a>00316               <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00317"></a>00317           }
<a name="l00318"></a>00318         }
<a name="l00319"></a>00319 <span class="preprocessor">#endif  // CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00320"></a>00320 <span class="preprocessor"></span>    }
<a name="l00321"></a>00321     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00322"></a>00322 }
<a name="l00323"></a>00323 
<a name="l00328"></a>00328 <span class="keyword">static</span> uint8_t goal_reached(<span class="keywordtype">void</span>) {
<a name="l00329"></a>00329     <span class="keywordflow">if</span> (green_field(<a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>) &amp;&amp; <a class="code" href="sensor_8c.html#a1569dab3dc9cb63de028504cb8bb0335">sensDistL</a> &lt; 300 &amp;&amp; <a class="code" href="sensor_8c.html#a7d7172e8d2124e3ffc0497f26c719932">sensDistR</a> &lt; 300)
<a name="l00330"></a>00330         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 <span class="preprocessor">#if FOLLOW_LINE_VERSION != OPTIMAL_LINE_BEHAVIOUR_VERSION</span>
<a name="l00337"></a>00337 <span class="preprocessor"></span>
<a name="l00343"></a><a class="code" href="behaviour__line__shortest__way_8c.html#af9f7ee886404c6cc59b064085d63a8ff">00343</a> uint8_t <a class="code" href="behaviour__line__shortest__way_8c.html#af9f7ee886404c6cc59b064085d63a8ff">check_crossing</a>(<span class="keywordtype">void</span>) {
<a name="l00344"></a>00344     <span class="keywordflow">if</span> (goal_reached()) {
<a name="l00345"></a>00345         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Ziel erreicht und Ende&quot;</span>);
<a name="l00346"></a>00346         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#aa3676de96e7d1bd81c8b5985f79c193e">GOAL_FOUND</a>; <span class="comment">// Verhalten Ende</span>
<a name="l00347"></a>00347         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="preprocessor">#ifdef CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00351"></a>00351 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (bot_reverse ) { <span class="comment">// entgegengesetzte Richtung wurde eingenommen</span>
<a name="l00352"></a>00352         way_back = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00353"></a>00353         bot_reverse=<a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;               <span class="comment">// Kennung Richtungswechsel wegsetzen</span>
<a name="l00354"></a>00354         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Richtungswechsel-Umkehr&quot;</span>);
<a name="l00355"></a>00355         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#a0654b41984b22fceed1cdda23abd9205">TURN_ON_GREEN</a>;       <span class="comment">// weiter mit Eintritt nach Gruenerkennung</span>
<a name="l00356"></a>00356         <span class="comment">//deactivateBehaviour(bot_check_reverse_direction_behaviour);  //Verhaltensueberwachung Richtungsumkehr beenden</span>
<a name="l00357"></a>00357         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359 <span class="preprocessor">#else</span>
<a name="l00360"></a>00360 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (green_field(<a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>)) { <span class="comment">// Umkehrfeld Gruenfeld erkannt</span>
<a name="l00361"></a>00361         way_back = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00362"></a>00362         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;auf Gruen Umkehr&quot;</span>);
<a name="l00363"></a>00363         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#a0654b41984b22fceed1cdda23abd9205">TURN_ON_GREEN</a>;       <span class="comment">// weiter mit Eintritt nach Gruenerkennung</span>
<a name="l00364"></a>00364         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00365"></a>00365     }
<a name="l00366"></a>00366 <span class="preprocessor">#endif</span>
<a name="l00367"></a>00367 <span class="preprocessor"></span>
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <span class="keywordflow">if</span> (<a class="code" href="sensor_8c.html#a84def4d45c65c50a87cd4882f9462b2e">sensBorderL</a> &gt; <a class="code" href="bot-local_8h.html#a98ae709ace7eaebe8e5ad09daf5c357a">BORDER_DANGEROUS</a> || <a class="code" href="sensor_8c.html#a0fdaee88ee679ed4c544707de739ee9a">sensBorderR</a> &gt; <a class="code" href="bot-local_8h.html#a98ae709ace7eaebe8e5ad09daf5c357a">BORDER_DANGEROUS</a>) {
<a name="l00371"></a>00371         <span class="comment">// Kennungen setzen auf Querlinie erkannt links oder rechts voraus, also wenn Abgrundsensor Linie (vorausgesetzt Abgrund gibt es nicht) erkennt</span>
<a name="l00372"></a>00372         <span class="keywordflow">if</span> (<a class="code" href="sensor_8c.html#a0fdaee88ee679ed4c544707de739ee9a">sensBorderR</a> &gt; <a class="code" href="bot-local_8h.html#a98ae709ace7eaebe8e5ad09daf5c357a">BORDER_DANGEROUS</a>) {
<a name="l00373"></a>00373             border_side_r_fired = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00374"></a>00374         } <span class="keywordflow">else</span> {
<a name="l00375"></a>00375             border_side_l_fired = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00376"></a>00376         }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378         <span class="comment">// Beide erkennen Querlinie</span>
<a name="l00379"></a>00379         <span class="keywordflow">if</span> (<a class="code" href="sensor_8c.html#a84def4d45c65c50a87cd4882f9462b2e">sensBorderL</a> &gt; <a class="code" href="bot-local_8h.html#a98ae709ace7eaebe8e5ad09daf5c357a">BORDER_DANGEROUS</a> &amp;&amp; <a class="code" href="sensor_8c.html#a0fdaee88ee679ed4c544707de739ee9a">sensBorderR</a> &gt; <a class="code" href="bot-local_8h.html#a98ae709ace7eaebe8e5ad09daf5c357a">BORDER_DANGEROUS</a>) {
<a name="l00380"></a>00380             border_side_l_fired = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00381"></a>00381             border_side_r_fired = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00382"></a>00382         }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384         <span class="keywordflow">if</span> (border_side_l_fired &amp;&amp; border_side_r_fired) {
<a name="l00385"></a>00385             <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;beide zugeschlagen l/r %1d %1d!!!&quot;</span>, <a class="code" href="sensor_8c.html#a84def4d45c65c50a87cd4882f9462b2e">sensBorderL</a>, <a class="code" href="sensor_8c.html#a0fdaee88ee679ed4c544707de739ee9a">sensBorderR</a>);
<a name="l00386"></a>00386 
<a name="l00387"></a>00387             <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389         <span class="keywordflow">if</span> (border_side_l_fired || border_side_r_fired) {
<a name="l00390"></a>00390             <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;l oder r: %1d %1d&quot;</span>, border_side_l_fired, border_side_r_fired);
<a name="l00391"></a>00391         }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393     }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395     <span class="keywordflow">if</span> (distance_reached(&amp;lastpos_x, &amp;lastpos_y)) {
<a name="l00396"></a>00396         border_side_l_fired = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00397"></a>00397         border_side_r_fired = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 <span class="preprocessor">#ifdef CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00400"></a>00400 <span class="preprocessor"></span>        <span class="comment">// Ueberwachungsverhalten zum Check auf entgegengesetzte Richtung</span>
<a name="l00401"></a>00401         bot_check_reverse_direction(0);
<a name="l00402"></a>00402 <span class="preprocessor">#endif</span>
<a name="l00403"></a>00403 <span class="preprocessor"></span>    }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00407"></a>00407 }
<a name="l00408"></a>00408 <span class="preprocessor">#else // optimale Version</span>
<a name="l00409"></a>00409 <span class="preprocessor"></span>
<a name="l00414"></a>00414 <span class="keyword">static</span> uint8_t <a class="code" href="behaviour__line__shortest__way_8c.html#af9f7ee886404c6cc59b064085d63a8ff">check_crossing</a>(<span class="keywordtype">void</span>) {
<a name="l00415"></a>00415     <span class="keywordflow">if</span> (goal_reached()) {
<a name="l00416"></a>00416         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Ziel erreicht und Ende&quot;</span>);
<a name="l00417"></a>00417         lineState = 99; <span class="comment">// Verhalten Ende</span>
<a name="l00418"></a>00418         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00419"></a>00419     }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421 <span class="preprocessor">#ifdef CHECK_REVERSE_BEHAVIOUR</span>
<a name="l00422"></a>00422 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (bot_reverse ) { <span class="comment">// entgegengesetzte Richtung wurde eingenommen</span>
<a name="l00423"></a>00423         way_back = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00424"></a>00424         bot_reverse=<a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;               <span class="comment">// Kennung Richtungswechsel wegsetzen</span>
<a name="l00425"></a>00425         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Richtungswechsel-Umkehr&quot;</span>);
<a name="l00426"></a>00426         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#a0654b41984b22fceed1cdda23abd9205">TURN_ON_GREEN</a>;       <span class="comment">// weiter mit Eintritt nach Gruenerkennung</span>
<a name="l00427"></a>00427         deactivateBehaviour(<a class="code" href="behaviour__line__shortest__way_8c.html#accf7327bce031854e46c26edf305a154">bot_check_reverse_direction_behaviour</a>);  <span class="comment">//Verhaltensueberwachung Richtungsumkehr beenden</span>
<a name="l00428"></a>00428         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431     <span class="keywordflow">if</span> (distance_reached(&amp;lastpos_x, &amp;lastpos_y))
<a name="l00432"></a>00432         <span class="comment">// Ueberwachungsverhalten zum Check auf entgegengesetzte Richtung starten oder mit neuer Ausrichtung weiterpruefen</span>
<a name="l00433"></a>00433         bot_check_reverse_direction(0);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 <span class="preprocessor">#else</span>
<a name="l00436"></a>00436 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (green_field(<a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>)) { <span class="comment">// Gruenfeld erkannt</span>
<a name="l00437"></a>00437         way_back = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00438"></a>00438         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;auf Gruen Umkehr&quot;</span>);
<a name="l00439"></a>00439         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#a0654b41984b22fceed1cdda23abd9205">TURN_ON_GREEN</a>;       <span class="comment">// weiter mit Eintritt nach Gruenerkennung</span>
<a name="l00440"></a>00440         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00441"></a>00441     }
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 <span class="preprocessor">#endif // Drehrichtungsumkehr mit Verhalten ueberwachen</span>
<a name="l00444"></a>00444 <span class="preprocessor"></span>
<a name="l00445"></a>00445     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00446"></a>00446 }
<a name="l00447"></a>00447 <span class="preprocessor">#endif // OPTIMAL_VERSION</span>
<a name="l00448"></a>00448 <span class="preprocessor"></span>
<a name="l00453"></a>00453 <span class="keyword">static</span> uint8_t check_line_sensors(<span class="keywordtype">void</span>) {
<a name="l00454"></a>00454     <span class="keywordflow">if</span> (<a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a> &gt;= <a class="code" href="bot-local_8h.html#a0749b819b7222e5cb2e8788fa520c00b" title="Linie im Sim = 0x350.">LINE_SENSE</a> || <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a> &gt;= <a class="code" href="bot-local_8h.html#a0749b819b7222e5cb2e8788fa520c00b" title="Linie im Sim = 0x350.">LINE_SENSE</a>)
<a name="l00455"></a>00455         <span class="keywordflow">return</span> <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00456"></a>00456 
<a name="l00457"></a>00457     <span class="keywordflow">return</span> <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00468"></a><a class="code" href="behaviour__line__shortest__way_8h.html#a6cf7db2f580d1df9f8db559ba0cfc2c8">00468</a> <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#a6cf7db2f580d1df9f8db559ba0cfc2c8">bot_line_shortest_way_behaviour</a>(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * data) {
<a name="l00469"></a>00469     <span class="keywordflow">switch</span> (lineState) {
<a name="l00470"></a>00470     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#a50818588c9707aa0dbd7b83f2f5f2b4d">GO_TO_LINE</a>: <span class="comment">// bot faehrt gewisse Strecke vorwaerts bis zur Linie</span>
<a name="l00471"></a>00471         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Start Linienfolger l/r %1d %1d, Version %1d&quot;</span>, <a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a>, <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a>, <a class="code" href="behaviour__follow__line_8h.html#aa03807d7c37fa02e18bb023c17c7095c">FOLLOW_LINE_VERSION</a>);
<a name="l00472"></a>00472 
<a name="l00473"></a>00473         <span class="comment">// naechster Verhaltenszustand</span>
<a name="l00474"></a>00474         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#ade558e02ab2cc8b95d2d04016f8b624f">CHECK_LINE</a>;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476         <span class="comment">// falls vom Ziel rueckwaerts gefahren werden soll und bot ist noch auf Zielendposition, dann erst einmal drehen</span>
<a name="l00477"></a>00477         <span class="keywordflow">if</span> (goal_reached() &amp;&amp; way_back) {
<a name="l00478"></a>00478             (<a class="code" href="behaviour__turn_8c.html#af8e1b5de92fa7f8f465615dff50b81fb" title="Dreht den Bot im mathematischen Drehsinn.">bot_turn</a>(data, 180));
<a name="l00479"></a>00479             <span class="keywordflow">break</span>; <span class="comment">// im selben Verhaltensstatus weiter mit Liniensuche Strecke voraus fahren</span>
<a name="l00480"></a>00480         } <span class="keywordflow">else</span> {
<a name="l00481"></a>00481             <a class="code" href="behaviour__goto__pos_8c.html#af3cd84671054daefcec8c370feaf0c1c">bot_goto_dist</a>(data, 600, 1); <span class="comment">// maximal 60cm vorwaerts bis Linie voraus</span>
<a name="l00482"></a>00482             <a class="code" href="behaviour__cancel__behaviour_8c.html#a9d3bf9ebf7c36f74b1c02506d88a101f" title="Botenfunktion zum Deaktivieren eines Verhaltens, wenn die Abbruchbedingung erfuellt ist...">bot_cancel_behaviour</a>(data, <a class="code" href="behaviour__goto__pos_8c.html#a438ebcd779ae602e208e9ebe3b9aee44">bot_goto_pos_behaviour</a>,
<a name="l00483"></a>00483                     check_line_sensors); <span class="comment">// Ende der Vorwaertsfahrt wenn Linie erkannt wurde</span>
<a name="l00484"></a>00484         }
<a name="l00485"></a>00485         <span class="keywordflow">break</span>;
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#ade558e02ab2cc8b95d2d04016f8b624f">CHECK_LINE</a>: <span class="comment">// laesst hier den bot eine Linie folgen</span>
<a name="l00488"></a>00488 
<a name="l00489"></a>00489         <span class="comment">// Linienfolger-Verhalten starten</span>
<a name="l00490"></a>00490         <a class="code" href="behaviour__follow__line_8h.html#a697f0c554ed200340351641b5dbb091d">bot_follow_line</a>(data);
<a name="l00491"></a>00491         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Linienfolger CheckLine l/r %1d %1d, Version %1d&quot;</span>, <a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a>, <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a>, <a class="code" href="behaviour__follow__line_8h.html#aa03807d7c37fa02e18bb023c17c7095c">FOLLOW_LINE_VERSION</a>);
<a name="l00492"></a>00492 
<a name="l00493"></a>00493         <span class="comment">// cancel nur fuer die Linienfolger, die nicht Kreuzungen oder Abgrund erkennen</span>
<a name="l00494"></a>00494         <span class="comment">// der optimale Linienfolger 3 macht dies von sich aus</span>
<a name="l00495"></a>00495 <span class="preprocessor">#if FOLLOW_LINE_VERSION != OPTIMAL_LINE_BEHAVIOUR_VERSION</span>
<a name="l00496"></a>00496 <span class="preprocessor"></span>        <span class="comment">// ebenfalls Kennungen initialisieren fuer Endeerkennung der Kreuzungen</span>
<a name="l00497"></a>00497         border_side_l_fired = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00498"></a>00498         border_side_r_fired = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00499"></a>00499 <span class="preprocessor">#endif</span>
<a name="l00500"></a>00500 <span class="preprocessor"></span>        <span class="comment">// fuer Cancel-Check_Verhalten letzten Positionen, also Botpos, belegen</span>
<a name="l00501"></a>00501         lastpos_x = <a class="code" href="sensor_8c.html#ac5ae500a2280ad6ed571a99a11954492">x_pos</a>;
<a name="l00502"></a>00502         lastpos_y = <a class="code" href="sensor_8c.html#a82663881f9567f6bf0b697b77af08d0d">y_pos</a>;
<a name="l00503"></a>00503 
<a name="l00504"></a>00504         <a class="code" href="behaviour__cancel__behaviour_8c.html#a9d3bf9ebf7c36f74b1c02506d88a101f" title="Botenfunktion zum Deaktivieren eines Verhaltens, wenn die Abbruchbedingung erfuellt ist...">bot_cancel_behaviour</a>(data, <a class="code" href="behaviour__follow__line_8h.html#afc60ceec962790640af859b4cdf30113">bot_follow_line_behaviour</a>, <a class="code" href="behaviour__line__shortest__way_8c.html#af9f7ee886404c6cc59b064085d63a8ff">check_crossing</a>);
<a name="l00505"></a>00505 
<a name="l00506"></a>00506         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#af95fbf1c704d0465a9cef50721ebb221">CHECK_BORDER</a>; <span class="comment">// naechster Zustand</span>
<a name="l00507"></a>00507         <span class="keywordflow">break</span>;
<a name="l00508"></a>00508 
<a name="l00509"></a>00509     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#af95fbf1c704d0465a9cef50721ebb221">CHECK_BORDER</a>: <span class="comment">// kleines Stueck vorfahren fuer Abgrundcheck</span>
<a name="l00510"></a>00510         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#a2367b00bfdacd4c2791b0fda6408192c">GO_FORWARD</a>; <span class="comment">// naechster Verhaltenszustand</span>
<a name="l00511"></a>00511         <a class="code" href="behaviour__goto__pos_8c.html#af3cd84671054daefcec8c370feaf0c1c">bot_goto_dist</a>(data, 20, 1); <span class="comment">// 2cm vorfahren, Liniensensoren sind dann runter von Linie, falls nicht Abgrund</span>
<a name="l00512"></a>00512 <span class="comment">//      deactivateBehaviour(bot_behaviour_cancel_behaviour); // Cancelverhalten fuer Linienfolger beenden</span>
<a name="l00513"></a>00513         crossing_reached = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>; <span class="comment">// Kennung setzen, ab jetzt auch Gruenfelder fuer Umkehr ausgewertet</span>
<a name="l00514"></a>00514         <span class="keywordflow">break</span>;
<a name="l00515"></a>00515 
<a name="l00516"></a>00516     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#a2367b00bfdacd4c2791b0fda6408192c">GO_FORWARD</a>: <span class="comment">// Erkennung ob Abgrund und Ende, falls nicht weiter bis Liniensensoren auf Krezung</span>
<a name="l00518"></a>00518 <span class="comment"></span><span class="comment">//      if (sensBorderL &gt; BORDER_DANGEROUS || sensBorderR &gt; BORDER_DANGEROUS) {</span>
<a name="l00519"></a>00519 <span class="comment">//          LOG_DEBUG(&quot;Abgrund und Ende %1d %1d&quot;, sensBorderL, sensBorderR);</span>
<a name="l00520"></a>00520 <span class="comment">//          lineState = GOAL_FOUND; // Verhalten Ende</span>
<a name="l00521"></a>00521 <span class="comment">//          break;</span>
<a name="l00522"></a>00522 <span class="comment">//      }</span>
<a name="l00523"></a>00523         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#ace57a72a89f31fa81257cbea0c608f7c">TURN_SIDEWISH_ON_CROSSING</a>; <span class="comment">// naechster Verhaltenszustand</span>
<a name="l00524"></a>00524         <a class="code" href="behaviour__goto__pos_8c.html#af3cd84671054daefcec8c370feaf0c1c">bot_goto_dist</a>(data, 30, 1); <span class="comment">// vorfahren bis Liniensensoren ideal auf Kreuzung stehen zur Drehung</span>
<a name="l00525"></a>00525         <span class="keywordflow">break</span>;
<a name="l00526"></a>00526 
<a name="l00527"></a>00527     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#ace57a72a89f31fa81257cbea0c608f7c">TURN_SIDEWISH_ON_CROSSING</a>: <span class="comment">// Festlegen und Ausfuehren der Drehung je nach Richtung und Fahrlogik (Stackfahren vor oder zurueck)</span>
<a name="l00528"></a>00528         <span class="comment">// beim Rueckweg way_back==True vom Stack hier die Kreuzung holen; bei Hinweg neu auf den</span>
<a name="l00529"></a>00529         <span class="comment">// Stack legen</span>
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;vor turn 90 l/r %1d %1d,way_back  %1d&quot;</span>, <a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a>, <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a>, way_back);
<a name="l00532"></a>00532 
<a name="l00533"></a>00533         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#ab35135ebd43d0fc05754c4a21e601717">GO_FORWARD_AFTER_TURN</a>; <span class="comment">// naechster Verhaltenszustand</span>
<a name="l00534"></a>00534 
<a name="l00535"></a>00535         <span class="keywordflow">if</span> (!go_stack_way) { <span class="comment">// Logik Zielsuchen, kein Stackfahren</span>
<a name="l00536"></a>00536 
<a name="l00537"></a>00537             <span class="keywordflow">if</span> (way_back) { <span class="comment">// bot auf Rueckweg nach Wegende mit Gruenfeld</span>
<a name="l00538"></a>00538 
<a name="l00539"></a>00539                 <span class="keywordflow">if</span> (!pop_stack_crossing(&amp;crosstype, &amp;direction_counter)) {
<a name="l00540"></a>00540                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;kein Pop moeglich&quot;</span>);
<a name="l00541"></a>00541                     lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#aa3676de96e7d1bd81c8b5985f79c193e">GOAL_FOUND</a>; <span class="comment">// Verhalten Ende</span>
<a name="l00542"></a>00542                     <span class="keywordflow">break</span>;
<a name="l00543"></a>00543                 }
<a name="l00544"></a>00544                 direction_counter++;
<a name="l00545"></a>00545 
<a name="l00546"></a>00546                 <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;---X vom Stack nehmen wg. back %1d counter %1d&quot;</span>, way_back, direction_counter);
<a name="l00547"></a>00547                 <span class="keywordflow">if</span> (direction_counter &lt;= 3) {
<a name="l00548"></a>00548                     push_stack_crossing(1, direction_counter);
<a name="l00549"></a>00549                     way_back = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>; <span class="comment">// wird wieder zu vorwaerts</span>
<a name="l00550"></a>00550                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;wieder push, back %1d counter %1d&quot;</span>, way_back, direction_counter);
<a name="l00551"></a>00551                 } <span class="keywordflow">else</span>
<a name="l00552"></a>00552                 <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;X wird vergessen-irrelevant&quot;</span>);
<a name="l00553"></a>00553 
<a name="l00554"></a>00554             } <span class="keywordflow">else</span> { <span class="comment">// Bot kommt auf Vorwaertsfahrt an Kreuzung an</span>
<a name="l00555"></a>00555 
<a name="l00556"></a>00556                 direction_counter = 1; <span class="comment">// ersten Weg nehmen</span>
<a name="l00557"></a>00557                 push_stack_crossing(1, direction_counter); <span class="comment">// Kreuzung und Weg auf Stack legen</span>
<a name="l00558"></a>00558                 <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;&gt;&gt; X ist neu vorw. und Push, counter %1d&quot;</span>, direction_counter);
<a name="l00559"></a>00559                 way_back = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>; <span class="comment">// jedenfalls auf vorwaerts</span>
<a name="l00560"></a>00560             }
<a name="l00561"></a>00561         } <span class="keywordflow">else</span> { <span class="comment">// hier soll der im Stack liegende kuerzeste Weg abgefahren werden</span>
<a name="l00562"></a>00562             <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Stack abfahren und Richtung aus Stack&quot;</span>);
<a name="l00563"></a>00563 
<a name="l00564"></a>00564             <span class="comment">// Unterscheidung fuer Vorwaerts und Rueckwaerts,</span>
<a name="l00565"></a>00565             <span class="comment">// bei vorwaerts wurde Bot wieder an Ausgangspunkt gesetzt und faehrt zum Ziel</span>
<a name="l00566"></a>00566             <span class="comment">// bei rueckwaerts faehrt bot vom Ziel zurueck zum Anfang der Linie bis Stack leer ist an Ankunft 1.Kreuzung    ab Start</span>
<a name="l00567"></a>00567             <span class="comment">// gespeicherter Richtungswert muss je nach vorwaerts oder rueckwaerts anders interpretiert werden</span>
<a name="l00568"></a>00568             <span class="keywordflow">if</span> (way_back) {
<a name="l00569"></a>00569                 <span class="comment">// Weg rueckwaerts heisst Weg vom Ziel zurueckzufahren, also via Pop von Kreuzung zu Kreuzung hangeln</span>
<a name="l00570"></a>00570                 <span class="keywordflow">if</span> (!pop_stack_crossing(&amp;crosstype, &amp;direction_counter)) {
<a name="l00571"></a>00571                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;kein Pop moeglich&quot;</span>);
<a name="l00572"></a>00572                     lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#aa3676de96e7d1bd81c8b5985f79c193e">GOAL_FOUND</a>;
<a name="l00573"></a>00573                     <span class="keywordflow">break</span>;
<a name="l00574"></a>00574                 }
<a name="l00575"></a>00575 
<a name="l00576"></a>00576                 <span class="comment">// je nach Start-Ausgangs-Richtungswahl Richtungswert interpretieren</span>
<a name="l00577"></a>00577 <span class="preprocessor">#if START_SIDEWISH == 1 // links bevorzugt</span>
<a name="l00578"></a>00578 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (direction_counter == 1) {
<a name="l00579"></a>00579                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach rechts&quot;</span>);
<a name="l00580"></a>00580                     sidewish = -1;
<a name="l00581"></a>00581                 }
<a name="l00582"></a>00582                 <span class="keywordflow">if</span> (direction_counter == 3) {
<a name="l00583"></a>00583                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach links&quot;</span>);
<a name="l00584"></a>00584                     sidewish = 1;
<a name="l00585"></a>00585                 }
<a name="l00586"></a>00586 <span class="preprocessor">#else // rechts bevorzugt</span>
<a name="l00587"></a>00587 <span class="preprocessor"></span>                <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;neg wg. rechts zuerst&quot;</span>);
<a name="l00588"></a>00588                 <span class="keywordflow">if</span> (direction_counter == 1) {
<a name="l00589"></a>00589                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach links&quot;</span>);
<a name="l00590"></a>00590                     sidewish = 1;
<a name="l00591"></a>00591                 }
<a name="l00592"></a>00592                 <span class="keywordflow">if</span> (direction_counter == 3) {
<a name="l00593"></a>00593                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach rechts&quot;</span>);
<a name="l00594"></a>00594                     sidewish = -1;
<a name="l00595"></a>00595                 }}
<a name="l00596"></a>00596 <span class="preprocessor">#endif // START_SIDEWISH == 1</span>
<a name="l00597"></a>00597 <span class="preprocessor"></span>
<a name="l00598"></a>00598             } <span class="comment">// Ende zurueck vom Ziel</span>
<a name="l00599"></a>00599             <span class="keywordflow">else</span> {
<a name="l00600"></a>00600                 <span class="comment">// bot soll hier den kuerzesten Weg vom Start- zum Zielpunkt abfahren, d.h. bot befindet sich wieder</span>
<a name="l00601"></a>00601                 <span class="comment">// am Startpunkt (manuell hingesetzt/ gefahren) und muss sich den jeweils 1. Stackwert holen und abfahren</span>
<a name="l00602"></a>00602                 <span class="keywordflow">if</span> (!dequeue_stack_crossing(&amp;crosstype, &amp;direction_counter)) {
<a name="l00603"></a>00603                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;kein dequeue moeglich&quot;</span>);
<a name="l00604"></a>00604                     lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#aa3676de96e7d1bd81c8b5985f79c193e">GOAL_FOUND</a>;
<a name="l00605"></a>00605                     <span class="keywordflow">break</span>;
<a name="l00606"></a>00606                 }
<a name="l00607"></a>00607 
<a name="l00608"></a>00608                 <span class="comment">// auch hier je nach Wunsch-Start-Richtungswahl die Richtung interpretieren</span>
<a name="l00609"></a>00609 <span class="preprocessor">#if START_SIDEWISH == 1 // links bevorzugt</span>
<a name="l00610"></a>00610 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (direction_counter == 1) { <span class="comment">// links bevorzugt</span>
<a name="l00611"></a>00611                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach links&quot;</span>);
<a name="l00612"></a>00612                     sidewish = 1;
<a name="l00613"></a>00613                 }
<a name="l00614"></a>00614                 <span class="keywordflow">if</span> (direction_counter == 3) {
<a name="l00615"></a>00615                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach rechts&quot;</span>);
<a name="l00616"></a>00616                     sidewish = -1;
<a name="l00617"></a>00617                 }
<a name="l00618"></a>00618 <span class="preprocessor">#else // rechts bevorzugt</span>
<a name="l00619"></a>00619 <span class="preprocessor"></span>                <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;neg wegen rechts zuerst&quot;</span>);
<a name="l00620"></a>00620                 <span class="keywordflow">if</span> (direction_counter == 1) {
<a name="l00621"></a>00621                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach rechts&quot;</span>);
<a name="l00622"></a>00622                     sidewish = -1;
<a name="l00623"></a>00623                 }
<a name="l00624"></a>00624                 <span class="keywordflow">if</span> (direction_counter == 3) {
<a name="l00625"></a>00625                     <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;nach links&quot;</span>);
<a name="l00626"></a>00626                     sidewish = 1;
<a name="l00627"></a>00627                 }
<a name="l00628"></a>00628 <span class="preprocessor">#endif // START_SIDEWISH</span>
<a name="l00629"></a>00629 <span class="preprocessor"></span>            }
<a name="l00630"></a>00630 
<a name="l00631"></a>00631             <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;X Richtg. %1d&quot;</span>, direction_counter);
<a name="l00632"></a>00632 
<a name="l00633"></a>00633             <span class="keywordflow">if</span> (direction_counter == 2) {
<a name="l00634"></a>00634                 <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;geradeaus&quot;</span>);
<a name="l00635"></a>00635                 <span class="keywordflow">break</span>; <span class="comment">// ohne Drehung weiter</span>
<a name="l00636"></a>00636             }
<a name="l00637"></a>00637         }
<a name="l00638"></a>00638         <span class="comment">// Drehung 90 Grad ausfuehren</span>
<a name="l00639"></a>00639         <a class="code" href="behaviour__turn_8c.html#af8e1b5de92fa7f8f465615dff50b81fb" title="Dreht den Bot im mathematischen Drehsinn.">bot_turn</a>(data, sidewish * 90);
<a name="l00640"></a>00640         <span class="keywordflow">break</span>;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#ab35135ebd43d0fc05754c4a21e601717">GO_FORWARD_AFTER_TURN</a>: <span class="comment">// hierher nach 90 Grad Drehung in gewuenschte Richtung</span>
<a name="l00643"></a>00643         <a class="code" href="behaviour__delay_8h.html#a055af26c844a6277d16f00f3a5de3458">BLOCK_BEHAVIOUR</a>(data, 500); <span class="comment">// etwas warten</span>
<a name="l00644"></a>00644         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;etwas vor nach Dreh l/r %1d %1d&quot;</span>, <a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a>, <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a>);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646         <span class="comment">// geht dann wieder mit Linienfolger weiter</span>
<a name="l00647"></a>00647         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#a50818588c9707aa0dbd7b83f2f5f2b4d">GO_TO_LINE</a>; <span class="comment">// dort vorfahren bis Cancelverhalten Linie erkennt</span>
<a name="l00648"></a>00648         <a class="code" href="behaviour__goto__pos_8c.html#af3cd84671054daefcec8c370feaf0c1c">bot_goto_dist</a>(data, 20, 1); <span class="comment">// vorfahren, Linesensoren sind dann auf Kreuzung</span>
<a name="l00649"></a>00649         border_side_l_fired = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>; <span class="comment">// Kennungen ruecksetzen</span>
<a name="l00650"></a>00650         border_side_r_fired = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00651"></a>00651         <span class="comment">//bot_cancel_behaviour(data, bot_goto_pos_behaviour, check_line_sensors);  // Ende der Vorwaertsfahrt wenn Linie erkannt wurde</span>
<a name="l00652"></a>00652         <span class="keywordflow">break</span>;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#a0654b41984b22fceed1cdda23abd9205">TURN_ON_GREEN</a>: <span class="comment">// hierher nach Erkennung des Gruenfeldes mit Richtungsumkehr</span>
<a name="l00655"></a>00655 <span class="comment">//      deactivateBehaviour(bot_behaviour_cancel_behaviour); // Cancelverhalten fuer Linienfolger beenden</span>
<a name="l00656"></a>00656         <a class="code" href="behaviour__delay_8h.html#a055af26c844a6277d16f00f3a5de3458">BLOCK_BEHAVIOUR</a>(data, 500); <span class="comment">// evtl. etwas warten</span>
<a name="l00657"></a>00657         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#ade558e02ab2cc8b95d2d04016f8b624f">CHECK_LINE</a>;
<a name="l00658"></a>00658 <span class="preprocessor">#ifndef CHECK_REVERSE_BEHAVIOUR     // hat ja bereits die entgegengesetzte Richtung eingenommen und damit wieder in Ausgangs-Zielrichtung</span>
<a name="l00659"></a>00659 <span class="preprocessor"></span>        <a class="code" href="behaviour__turn_8c.html#af8e1b5de92fa7f8f465615dff50b81fb" title="Dreht den Bot im mathematischen Drehsinn.">bot_turn</a>(data, 180);
<a name="l00660"></a>00660         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Umkehr erkannt und bot_turn&quot;</span>);
<a name="l00661"></a>00661 <span class="preprocessor">#endif</span>
<a name="l00662"></a>00662 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#aa3676de96e7d1bd81c8b5985f79c193e">GOAL_FOUND</a>:
<a name="l00665"></a>00665         lineState = <a class="code" href="behaviour__line__shortest__way_8c.html#a29fd18bed01c4d836c7ebfe73a125c3f">END</a>;
<a name="l00666"></a>00666 <span class="preprocessor">#ifdef BEHAVIOUR_SERVO_AVAILABLE</span>
<a name="l00667"></a>00667 <span class="preprocessor"></span>        <a class="code" href="behaviour__servo_8c.html#ab12411c90e13fc9e924d02212a7769c6">bot_servo</a>(data, <a class="code" href="motor_8h.html#a8f2a5c30e29a7191cff398b144850d51" title="Servo 1.">SERVO1</a>, <a class="code" href="bot-local_8h.html#aa2f39ed7eb7927d5aa4f01c52a15431b" title="Linker Anschlag des Servos.">DOOR_OPEN</a>); <span class="comment">// Ziel gefunden und Klappe auf</span>
<a name="l00668"></a>00668 <span class="preprocessor">#endif</span>
<a name="l00669"></a>00669 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l00670"></a>00670 
<a name="l00671"></a>00671     <span class="keywordflow">case</span> <a class="code" href="behaviour__line__shortest__way_8c.html#a29fd18bed01c4d836c7ebfe73a125c3f">END</a>: <span class="comment">// Verhaltensende</span>
<a name="l00672"></a>00672         <a class="code" href="behaviour__line__shortest__way_8c.html#a754b3d074e0af4ad3c7b918dd77ecb2d">LOG_DEBUG</a>(<span class="stringliteral">&quot;Ende Behav. l/r %1d %1d&quot;</span>, <a class="code" href="sensor_8c.html#a56a020f1eb08fbff3d7fa669335921ed">sensLineL</a>, <a class="code" href="sensor_8c.html#ae286bb8f86cced317801e378247dcb18">sensLineR</a>);
<a name="l00673"></a>00673 <span class="preprocessor">#ifdef BEHAVIOUR_SERVO_AVAILABLE</span>
<a name="l00674"></a>00674 <span class="preprocessor"></span>        <a class="code" href="behaviour__servo_8c.html#ab12411c90e13fc9e924d02212a7769c6">bot_servo</a>(data, <a class="code" href="motor_8h.html#a8f2a5c30e29a7191cff398b144850d51" title="Servo 1.">SERVO1</a>, <a class="code" href="bot-local_8h.html#a4ef8b71b5650632bd07a37296c4a5f89" title="Rechter Anschlag des Servos.">DOOR_CLOSE</a>); <span class="comment">// Ziel gefunden und Klappe wieder zu</span>
<a name="l00675"></a>00675 <span class="preprocessor">#endif</span>
<a name="l00676"></a>00676 <span class="preprocessor"></span>        return_from_behaviour(data);
<a name="l00677"></a>00677         <span class="keywordflow">break</span>;
<a name="l00678"></a>00678     }
<a name="l00679"></a>00679 }
<a name="l00680"></a>00680 
<a name="l00685"></a><a class="code" href="behaviour__line__shortest__way_8h.html#a0982dfc14b932f386e0a8a77c1990916">00685</a> <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#a0982dfc14b932f386e0a8a77c1990916">bot_line_shortest_way</a>(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * caller) {
<a name="l00686"></a>00686     <a class="code" href="bot-logic_8c.html#a123152ecfcd89545c2603cb3f2e873c9" title="Ruft ein anderes Verhalten auf und merkt sich den Ruecksprung return_from_behaviour() kehrt dann spae...">switch_to_behaviour</a>(caller, <a class="code" href="behaviour__line__shortest__way_8c.html#a6cf7db2f580d1df9f8db559ba0cfc2c8">bot_line_shortest_way_behaviour</a>, <a class="code" href="bot-logic_8h.html#a59191cd512c3376a23c8a7d259a1e111" title="Konstanten, wenn Verhalten beim Aufruf alte Wuensche nicht ueberschreiben sollen.">BEHAVIOUR_NOOVERRIDE</a>);
<a name="l00687"></a>00687     lineState = 0;
<a name="l00688"></a>00688     border_side_l_fired = 0;
<a name="l00689"></a>00689     border_side_r_fired = 0;
<a name="l00690"></a>00690     direction_counter = 0;
<a name="l00691"></a>00691     crossing_reached = 0;
<a name="l00692"></a>00692     greencounter = 0;
<a name="l00693"></a>00693     sidewish = <a class="code" href="behaviour__line__shortest__way_8c.html#a1ff0d2239e3e8bf51a95a64d1aee6a30">START_SIDEWISH</a>;
<a name="l00694"></a>00694     way_back = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00695"></a>00695     go_stack_way = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00696"></a>00696     pos_store = <a class="code" href="pos__store_8c.html#a0905da2b2d85fab632f239804dacec4d">pos_store_create_size</a>(<a class="code" href="bot-logic_8c.html#a11e7a95fd56f9703bd2bd9c61300df6c" title="Liefert das Verhalten zurueck, welches durch function implementiert ist.">get_behaviour</a>(<a class="code" href="behaviour__line__shortest__way_8c.html#a6cf7db2f580d1df9f8db559ba0cfc2c8">bot_line_shortest_way_behaviour</a>),
<a name="l00697"></a>00697             pos_store_data, <a class="code" href="behaviour__drive__area_8c.html#a6423a880df59733d2d9b509c7718d3a9">STACK_SIZE</a>);
<a name="l00698"></a>00698 
<a name="l00699"></a>00699     <span class="comment">/* stoerende Notfallverhalten aus */</span>
<a name="l00700"></a>00700 <span class="preprocessor">#ifdef BEHAVIOUR_AVOID_COL_AVAILABLE</span>
<a name="l00701"></a>00701 <span class="preprocessor"></span>    deactivateBehaviour(<a class="code" href="behaviour__avoid__col_8c.html#af537d5e45f3f8339619d9dccf7d86e5d">bot_avoid_col_behaviour</a>);
<a name="l00702"></a>00702 <span class="preprocessor">#endif</span>
<a name="l00703"></a>00703 <span class="preprocessor"></span><span class="preprocessor">#ifdef BEHAVIOUR_AVOID_BORDER_AVAILABLE</span>
<a name="l00704"></a>00704 <span class="preprocessor"></span>    deactivateBehaviour(<a class="code" href="behaviour__avoid__border_8c.html#a2941d3177f415a75eee81902f17b4357">bot_avoid_border_behaviour</a>);
<a name="l00705"></a>00705 <span class="preprocessor">#endif</span>
<a name="l00706"></a>00706 <span class="preprocessor"></span>}
<a name="l00707"></a>00707 
<a name="l00712"></a><a class="code" href="behaviour__line__shortest__way_8h.html#a719080ab65e0a145ddf6a7eea7505dad">00712</a> <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#a719080ab65e0a145ddf6a7eea7505dad">bot_line_shortest_way_continue</a>(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * caller) {
<a name="l00713"></a>00713     <a class="code" href="bot-logic_8c.html#a123152ecfcd89545c2603cb3f2e873c9" title="Ruft ein anderes Verhalten auf und merkt sich den Ruecksprung return_from_behaviour() kehrt dann spae...">switch_to_behaviour</a>(caller, <a class="code" href="behaviour__line__shortest__way_8c.html#a6cf7db2f580d1df9f8db559ba0cfc2c8">bot_line_shortest_way_behaviour</a>, <a class="code" href="bot-logic_8h.html#a59191cd512c3376a23c8a7d259a1e111" title="Konstanten, wenn Verhalten beim Aufruf alte Wuensche nicht ueberschreiben sollen.">BEHAVIOUR_NOOVERRIDE</a>);
<a name="l00714"></a>00714     lineState = 0;
<a name="l00715"></a>00715     border_side_l_fired = 0;
<a name="l00716"></a>00716     border_side_r_fired = 0;
<a name="l00717"></a>00717 }
<a name="l00718"></a>00718 
<a name="l00723"></a><a class="code" href="behaviour__line__shortest__way_8h.html#ad74c37b5c3f48444ff4a626513661da0">00723</a> <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#ad74c37b5c3f48444ff4a626513661da0">bot_line_shortest_way_forward</a>(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * caller) {
<a name="l00724"></a>00724     <a class="code" href="bot-logic_8c.html#a123152ecfcd89545c2603cb3f2e873c9" title="Ruft ein anderes Verhalten auf und merkt sich den Ruecksprung return_from_behaviour() kehrt dann spae...">switch_to_behaviour</a>(caller, <a class="code" href="behaviour__line__shortest__way_8c.html#a6cf7db2f580d1df9f8db559ba0cfc2c8">bot_line_shortest_way_behaviour</a>, <a class="code" href="bot-logic_8h.html#a59191cd512c3376a23c8a7d259a1e111" title="Konstanten, wenn Verhalten beim Aufruf alte Wuensche nicht ueberschreiben sollen.">BEHAVIOUR_NOOVERRIDE</a>);
<a name="l00725"></a>00725     lineState = 0;
<a name="l00726"></a>00726     border_side_l_fired = 0;
<a name="l00727"></a>00727     border_side_r_fired = 0;
<a name="l00728"></a>00728     crossing_reached = 0;
<a name="l00729"></a>00729     way_back = <a class="code" href="global_8h.html#a306ebd41c0cd1303b1372c6153f0caf8" title="falsch">False</a>;
<a name="l00730"></a>00730     go_stack_way = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00731"></a>00731 }
<a name="l00732"></a>00732 
<a name="l00737"></a><a class="code" href="behaviour__line__shortest__way_8h.html#ab6f1094324938887dd4cac0a0b8c49e8">00737</a> <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#ab6f1094324938887dd4cac0a0b8c49e8">bot_line_shortest_way_backward</a>(<a class="code" href="struct__Behaviour__t.html" title="Verwaltungsstruktur fuer die Verhaltensroutinen.">Behaviour_t</a> * caller) {
<a name="l00738"></a>00738     <a class="code" href="bot-logic_8c.html#a123152ecfcd89545c2603cb3f2e873c9" title="Ruft ein anderes Verhalten auf und merkt sich den Ruecksprung return_from_behaviour() kehrt dann spae...">switch_to_behaviour</a>(caller, <a class="code" href="behaviour__line__shortest__way_8c.html#a6cf7db2f580d1df9f8db559ba0cfc2c8">bot_line_shortest_way_behaviour</a>, <a class="code" href="bot-logic_8h.html#a59191cd512c3376a23c8a7d259a1e111" title="Konstanten, wenn Verhalten beim Aufruf alte Wuensche nicht ueberschreiben sollen.">BEHAVIOUR_NOOVERRIDE</a>);
<a name="l00739"></a>00739     lineState = 0;
<a name="l00740"></a>00740     border_side_l_fired = 0;
<a name="l00741"></a>00741     border_side_r_fired = 0;
<a name="l00742"></a>00742     go_stack_way = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00743"></a>00743     way_back = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>;
<a name="l00744"></a>00744     crossing_reached = <a class="code" href="global_8h.html#add3ca9eefe3b5b754426f51d3043e579" title="wahr">True</a>; <span class="comment">// damit bei Start auf gruenem Zielfeld dies auch erkannt wird, anders als vorwaerts</span>
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 
<a name="l00751"></a>00751 <span class="preprocessor">#ifdef DISPLAY_LINE_SHORTEST_WAY_AVAILABLE</span>
<a name="l00752"></a>00752 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> driveline_disp_key_handler(<span class="keywordtype">void</span>) {
<a name="l00753"></a>00753     <span class="keywordflow">switch</span> (<a class="code" href="sensor_8h.html#a0c6d9b2de12c900271241f3044baaa92">RC5_Code</a>) {
<a name="l00754"></a>00754 
<a name="l00755"></a>00755     <span class="keywordflow">case</span> <a class="code" href="rc5-codes_8h.html#a08e80ef6f5925e8ac3cebbe430bde53d">RC5_CODE_5</a>:
<a name="l00756"></a>00756         <span class="comment">/* Verhalten starten zum Anfahren der Stackpunkte */</span>
<a name="l00757"></a>00757         <a class="code" href="sensor_8h.html#a0c6d9b2de12c900271241f3044baaa92">RC5_Code</a> = 0;
<a name="l00758"></a>00758         <a class="code" href="behaviour__line__shortest__way_8c.html#a0982dfc14b932f386e0a8a77c1990916">bot_line_shortest_way</a>(NULL);
<a name="l00759"></a>00759         <span class="keywordflow">break</span>;
<a name="l00760"></a>00760 
<a name="l00761"></a>00761     <span class="keywordflow">case</span> <a class="code" href="rc5-codes_8h.html#ae3025f4d13a70931802f28f3581fdc26">RC5_CODE_6</a>:
<a name="l00762"></a>00762         <span class="comment">/* Verhalten zum Speichern relevanter Wegepopsitionen zum Spaeteren Zurueckfahren */</span>
<a name="l00763"></a>00763         <a class="code" href="sensor_8h.html#a0c6d9b2de12c900271241f3044baaa92">RC5_Code</a> = 0;
<a name="l00764"></a>00764         <a class="code" href="behaviour__line__shortest__way_8c.html#a719080ab65e0a145ddf6a7eea7505dad">bot_line_shortest_way_continue</a>(NULL);
<a name="l00765"></a>00765         <span class="keywordflow">break</span>;
<a name="l00766"></a>00766 
<a name="l00767"></a>00767     <span class="keywordflow">case</span> <a class="code" href="rc5-codes_8h.html#a547b2175b4a50b2c9bd458f64f85dd49">RC5_CODE_8</a>:
<a name="l00768"></a>00768         <span class="comment">/* Zueckfahren vom Ziel zum Ausgangspunkt auf kuerzestem gespeicherten Weg */</span>
<a name="l00769"></a>00769         <a class="code" href="sensor_8h.html#a0c6d9b2de12c900271241f3044baaa92">RC5_Code</a> = 0;
<a name="l00770"></a>00770         <a class="code" href="behaviour__line__shortest__way_8c.html#ad74c37b5c3f48444ff4a626513661da0">bot_line_shortest_way_forward</a>(NULL);
<a name="l00771"></a>00771         <span class="keywordflow">break</span>;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773     <span class="keywordflow">case</span> <a class="code" href="rc5-codes_8h.html#ae7019e2cc3b9e1bf615f6f23440d3b46">RC5_CODE_9</a>:
<a name="l00774"></a>00774         <span class="comment">/* Zueckfahren vom Ziel zum Ausgangspunkt auf kuerzestem gespeicherten Weg */</span>
<a name="l00775"></a>00775         <a class="code" href="sensor_8h.html#a0c6d9b2de12c900271241f3044baaa92">RC5_Code</a> = 0;
<a name="l00776"></a>00776         <a class="code" href="behaviour__line__shortest__way_8c.html#ab6f1094324938887dd4cac0a0b8c49e8">bot_line_shortest_way_backward</a>(NULL);
<a name="l00777"></a>00777         <span class="keywordflow">break</span>;
<a name="l00778"></a>00778 
<a name="l00779"></a>00779     }
<a name="l00780"></a>00780 }
<a name="l00781"></a>00781 
<a name="l00785"></a><a class="code" href="behaviour__line__shortest__way_8h.html#ae716f9cfc45bfc908e8796f520b4a6ac">00785</a> <span class="keywordtype">void</span> <a class="code" href="behaviour__line__shortest__way_8c.html#ae716f9cfc45bfc908e8796f520b4a6ac">bot_line_shortest_way_display</a>(<span class="keywordtype">void</span>) {
<a name="l00786"></a>00786     <a class="code" href="display_8h.html#ad5109335e4419b07f4d9f73db290f2eb">display_cursor</a>(1, 1);
<a name="l00787"></a>00787     <a class="code" href="display_8h.html#ac5ba4c9512c407150e76ef8b97910271">display_puts</a>(<span class="stringliteral">&quot;DRIVE_LINE_S_WAY&quot;</span>);
<a name="l00788"></a>00788     <a class="code" href="display_8h.html#ad5109335e4419b07f4d9f73db290f2eb">display_cursor</a>(2, 1);
<a name="l00789"></a>00789     <a class="code" href="display_8h.html#ac5ba4c9512c407150e76ef8b97910271">display_puts</a>(<span class="stringliteral">&quot;GoLine/Continue:5/6&quot;</span>);
<a name="l00790"></a>00790     <a class="code" href="display_8h.html#ad5109335e4419b07f4d9f73db290f2eb">display_cursor</a>(4, 1);
<a name="l00791"></a>00791     <a class="code" href="display_8h.html#ac5ba4c9512c407150e76ef8b97910271">display_puts</a>(<span class="stringliteral">&quot;GoWayForw/Back:8/9&quot;</span>);
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     driveline_disp_key_handler(); <span class="comment">// aufrufen des Key-Handlers</span>
<a name="l00794"></a>00794 }
<a name="l00795"></a>00795 <span class="preprocessor">#endif // DISPLAY_LINE_SHORTEST_WAY_AVAILABLE</span>
<a name="l00796"></a>00796 <span class="preprocessor"></span>
<a name="l00797"></a>00797 <span class="preprocessor">#endif // BEHAVIOUR_LINE_SHORTEST_WAY_AVAILABLE</span>
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Erzeugt am Don Aug 18 2011 12:13:03 f√ºr c't-Bot von &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5
</small></address>

</body>
</html>
