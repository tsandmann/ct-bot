<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>c't-Bot: botfs.c-Dateireferenz</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">c't-Bot
   &#160;<span id="projectnumber">1818</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Erzeugt von Doxygen 1.7.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Hauptseite</span></a></li>
      <li><a href="pages.html"><span>Zusätzliche&#160;Informationen</span></a></li>
      <li><a href="annotated.html"><span>Datenstrukturen</span></a></li>
      <li class="current"><a href="files.html"><span>Dateien</span></a></li>
      <li><a href="dirs.html"><span>Verzeichnisse</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Auflistung&#160;der&#160;Dateien</span></a></li>
      <li><a href="globals.html"><span>Datei-Elemente</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Funktionen</a> &#124;
<a href="#var-members">Variablen</a>  </div>
  <div class="headertitle">
<div class="title">botfs.c-Dateireferenz</div>  </div>
</div>
<div class="contents">

<p>Dateisystem BotFS.  
<a href="#details">Mehr ...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ct-Bot_8h_source.html">ct-Bot.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="os__thread_8h_source.html">os_thread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="botfs_8h_source.html">botfs.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="botfs-low_8h_source.html">botfs-low.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include-Abhängigkeitsdiagramm für botfs.c:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c__incl.png" border="0" usemap="#botfs_8c" alt=""/></div>
<map name="botfs_8c" id="botfs_8c">
</map>
</div>
</div>
<p><a href="botfs_8c_source.html">gehe zum Quellcode dieser Datei</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Funktionen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a9452100255630000f8d3a3540f3546a3">botfs_init</a> (char *image, void *buffer, uint8_t create)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialisiert ein Volume.  <a href="#a9452100255630000f8d3a3540f3546a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a5eab2bbbace8faac17e9a9a35719d89a">botfs_create</a> (const char *filename, uint16_t size, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Legt eine neue Datei an.  <a href="#a5eab2bbbace8faac17e9a9a35719d89a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#aad0605bba52a09999f158cb2e371a5de">botfs_open</a> (const char *filename, botfs_file_descr_t *file, uint8_t mode, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Oeffnet eine Datei.  <a href="#aad0605bba52a09999f158cb2e371a5de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a51db2e9a9426dc9edb351cc81edd7a70">botfs_unlink</a> (const char *filename, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Entfernt eine Datei.  <a href="#a51db2e9a9426dc9edb351cc81edd7a70"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a425c8a53f498374adef8744291c8aa16">botfs_rename</a> (const char *filename, const char *new_name, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Benennt eine Datei um.  <a href="#a425c8a53f498374adef8744291c8aa16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a71348fbe8ed02ee7b07b6ab789a400ab">botfs_read</a> (botfs_file_descr_t *file, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Liest BOTFS_BLOCK_SIZE Bytes aus einer Datei in einen Puffer.  <a href="#a71348fbe8ed02ee7b07b6ab789a400ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#afe7539a83c840b120ef8996557fd0e9a">botfs_write</a> (botfs_file_descr_t *file, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schreibt BOTFS_BLOCK_SIZE Bytes aus einem Puffer in eine Datei.  <a href="#afe7539a83c840b120ef8996557fd0e9a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a5964332bb5b66e2201b3a6b26935e1af">botfs_flush_used_blocks</a> (botfs_file_descr_t *file, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schreibt die Information ueber benutzte Bloecke in den Datei-Header.  <a href="#a5964332bb5b66e2201b3a6b26935e1af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a4f5aa83fae2a2682310842df4c8458e0">botfs_read_header_data</a> (botfs_file_descr_t *file, uint8_t **headerdata, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Liest die frei verwendbaren Header-Daten einer Datei aus.  <a href="#a4f5aa83fae2a2682310842df4c8458e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a4211d1027e05944d4aff015446e01b62">botfs_write_header_data</a> (botfs_file_descr_t *file, void *buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schreib die frei verwendbaren Header-Daten einer Datei in den Header.  <a href="#a4211d1027e05944d4aff015446e01b62"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#ab1b873903671002d1b01240d6d800f55">botfs_get_startsector</a> (botfs_file_descr_t *file)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gibt die physische Blockadresse des Dateianfangs zurueck.  <a href="#ab1b873903671002d1b01240d6d800f55"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a186480cb74d92ebd01adbd2e2535a631">botfs_close_volume</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Beendet BotFS sauber.  <a href="#a186480cb74d92ebd01adbd2e2535a631"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variablen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a9b582e0d1a6060b578f95554abecb97f">botfs_volume_image_file</a> = BOTFS_IMAGE_FILENAME</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dateiname des BotFS-Volume-Images.  <a href="#a9b582e0d1a6060b578f95554abecb97f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">botfs_volume_data_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a2690205b7105228f95fd5a6ecae93641">botfs_vol_data</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Root-Dir- und Freelist-Adresse.  <a href="#a2690205b7105228f95fd5a6ecae93641"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="botfs-low_8h.html#a1acc1c3282ce989c2fc6f71ae2ba8d99">botfs_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="botfs_8c.html#a279d0b6ca2d1b5303e53bb54fc378ebc">botfs_mutex</a> = BOTFS_MUTEX_INITIALIZER</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">sperrt den Zugriff auf nicht threadsichere Funktionen  <a href="#a279d0b6ca2d1b5303e53bb54fc378ebc"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Ausführliche Beschreibung</h2>
<div class="textblock"><p>Dateisystem BotFS. </p>
<dl class="author"><dt><b>Autor:</b></dt><dd>Timo Sandmann (<a href="mailto:mail@timosandmann.de">mail@timosandmann.de</a>) </dd></dl>
<dl class="date"><dt><b>Datum:</b></dt><dd>18.02.2008</dd></dl>
<ul>
<li>Notwendige Vorbereitungen zur Verwendung:<br/>
<ul>
<li>PC:<br/>
 Keine Vorbereitungen noetig, ist kein Volume vorhanden, wird es automatisch angelegt und dazu eine Datei mit dem in BOTFS_IMAGE_FILENAME festgeleten Namen angelegt. Achtung, dieses Volume hat dann nicht die fuer MCU benoetigte Groesse (s.u.). Moechte man Daten zwischen MCU und PC austauschen, kopiert man die Datei von der MMC / SD-Karte ins Bot-Verzeichnis und ueberschreibt eine evtl. automatisch angelegte Datei.</li>
</ul>
</li>
</ul>
<ul>
<li>MCU:<br/>
 Um BotFS auf MCU mit MMC / SD-Karte nutzen zu koennen, muss die Karte einmalig dafuer vorbereitet werden. Es gibt drei moegliche Varianten:<ul>
<li>Variante 1: Vorgefertigtes Disk-Image auf die SD-Karte uebertragen<br/>
 + SD-Karte braucht nicht manuell partioniert werden<br/>
 + Nur ein Arbeitsschritt noetig<br/>
 -- Loescht die komplette SD-Karte<br/>
 -- unter Windows externes Tool noetig<br/>
</li>
<li>Variante 2: Manuelle Partionierung, anschliessende Einrichtung mit Hilfsprogramm<br/>
 + volle Kontrolle ueber die Partitionierung<br/>
 + Partions- und Imagegroesse anpassbar (max. 32 MB)<br/>
 -- mehrere Arbeitsschritte noetig<br/>
 -- Partionierung unter Windows evtl. umstaendlich<br/>
</li>
<li>Variante 3: vollstaendig manuelle Einrichtung<br/>
 + volle Kontrolle ueber alle Schritte<br/>
 -- recht umstaendlich<br/>
 <br/>
</li>
<li>Durchfuehrung Variante 1:<br/>
 Uebertragen des vorgefertigten Disk-Images (befindet sich in contrib/BotFS/sd.img.zip):<ul>
<li>unter Linux:<br/>
 1. Device-Node des Kartenlesers ausfindig machen, z.B /dev/sdb wie im Folgenden<br/>
 2. Evtl. vorhandene Partitionen auf der SD-Karten unmounten<br/>
 3. <div class="fragment"><pre class="fragment"> sudo gunzip -<a class="code" href="behaviour__drive__chess_8c.html#a3b00ce5034bade2e39bbba24553a8045">c</a> sd.img.zip | dd of=/dev/sdb bs=4<a class="code" href="behaviour__drive__chess_8c.html#a43ed7e3846304dce8b14d9bc81f63fef">k</a> 
</pre></div> (Achtung, /dev/sdb entsprechend anpassen!)<br/>
 4. <div class="fragment"><pre class="fragment"> sync 
</pre></div><br/>
</li>
<li>unter Mac OS X:<br/>
 1. Disk-Nummer des Kartenlesers ausfinden machen (Festplatten-Dienstprogramm -&gt; Info oder diskutil list), im Folgenden Beispiel disk3<br/>
 2. <div class="fragment"><pre class="fragment"> sudo diskutil unmountDisk /dev/rdisk3 
</pre></div> 3. <div class="fragment"><pre class="fragment"> sudo gunzip -<a class="code" href="behaviour__drive__chess_8c.html#a3b00ce5034bade2e39bbba24553a8045">c</a> sd.img.zip | dd of=/dev/rdisk3 bs=4<a class="code" href="behaviour__drive__chess_8c.html#a43ed7e3846304dce8b14d9bc81f63fef">k</a> 
</pre></div> (Achtung, /dev/rdisk3 entsprechend anpassen!)<br/>
 4. <div class="fragment"><pre class="fragment"> sync 
</pre></div><br/>
</li>
<li>unter Windows:<br/>
 0. physdiskwrite + PhysGUI von <a href="http://m0n0.ch/wall/physdiskwrite.php">http://m0n0.ch/wall/physdiskwrite.php</a> herunterladen und entpacken<br/>
 1. sd.img.zip entpacken, erzeugt die Datei sd.img<br/>
 2. PhysGUI.exe (als Administrator) starten<br/>
 3. Rechtsklick auf den Eintrag des Kartenlesers -&gt; Image laden -&gt; Oeffnen -&gt; sd.img auswaehlen -&gt; OK -&gt; Ja<br/>
 4. Hardawre sicher entfernen -&gt; auswerfen ausfuehren<br/>
 <br/>
</li>
</ul>
</li>
<li>Durchfuehrung Variante 2:<br/>
<ul>
<li>Einrichtung mit Hilfsprogramm BotFS Helper. Das Programm legt auf einer maximal 32 MB grossen FAT16-Partition einer SD-Karte ein BotFS-Image an.</li>
<li>Der Sourcecode des Hilfsprogramms ist im ct-Bot Repository unter other/ct-Bot-botfshelper zu finden.<br/>
</li>
<li>Zunaechst legt man auf der Karte eine FAT16-Partition an, die maximal 32 MByte gross ist. Diese muss die erste Partition auf der Karte sein, weitere Partitionen koennen problemlos folgen. Auf der SD-Karte muss unbedingt eine MBR-Partitionstabelle verwendet werden, GPT wird nicht unterstuetzt! Um durch Rechenweise und Aufrundungen des verwendeten Partitionstools nicht die 32 MByte-Grenze zu ueberschreiten, empfiehlt es sich, eine Partition von 30 MByte anzulegen - wichtig ist, dass die Groesse der erzeugten Partition 32 MByte, also <img class="formulaInl" alt="$ 32 * 2^{20} $" src="form_0.png"/> Byte, nicht ueberschreitet.<br/>
 Auf der angelegten Partition muessen unbedingt alle Dateien (auch evtl. Versteckte) geloescht werden, so dass die gesamte Partitionsgroesse als freier Speicher verfuegbar ist.<br/>
 Anschliessend ruft man das Hilfsprogramm aus contrib/BotFS wie folgt auf:<br/>
<ul>
<li>Linux: "./ct-Bot-botfshelper ABSOLUTER_PFAD_ZUR_SD-KARTE" also z.B. "./ct-Bot-botfshelper /media/SD"<br/>
</li>
<li>Mac: "./ct-Bot-botfshelper ABSOLUTER_PFAD_ZUR_SD-KARTE" also z.B. "./ct-Bot-botfshelper /Volumes/SD"<br/>
</li>
<li>Windows: "ct-Bot-botfshelper.exe ABSOLUTER_PFAD_ZUR_SD-KARTE" also z.B. "ct-Bot-botfshelper.exe e:\"<br/>
 Es bietet sich an, auf der SD-Karte auch eine zweite Partition (Groesse und Typ beliebig) anzulegen und dort eine Kopie der Datei botfs.img zu speichern. Moechte man einmal das komplette Dateisystem fuer den Bot leeren oder wurde es durch einen Fehler beschaedigt, kopiert man einfach dieses Backup zurueck auf die erste Partition und muss die obigen Schritte nicht wiederholen. <br/>
</li>
</ul>
</li>
</ul>
</li>
<li>Durchfuehrung Variante 3:<br/>
 Anlegen der Partition wie unter Variante 2.<br/>
 Anschliessend ermittelt man die exakte Groesse der Partition (je nach Betriebssystem findet sich diese in den Eigenschaften / Informationen des Laufwerks) in Byte und notiert sie. Auf der angelegten Partition muessen unbedingt alle Dateien (auch evtl. Versteckte) geloescht werden, so dass die gesamte Partitionsgroesse als freier Speicher verfuegbar ist. Die notierte Groesse teil man noch durch 1024 und erhaelt so die gewuenschte Image-Groesse in KByte. Nun startet man den fuer PC (mit BOT_FS_AVAILABLE) compilierten Bot-Code mit dem Parameter "-f", also "ct-Bot(.exe) -f", um die BotFS-Verwaltung aufzurufen. Dort gibt man "create volume" ein und bestaetigt das Kommando mit Enter. Als Dateinamen waehlt man anschliessend einen Namen wie "botfs.img", eine solche Datei darf aber noch nicht existieren. Eine komplette Pfadangabe ist auch moeglich, ansonsten wird die Datei im aktuellen Arbeitsverzeichnis erstellt. Als Volume-Name gibt man dann einen beliebigen ein, wie z.B. "BotFS-Volume", als Groesse danach die eben Ermittelte (in KByte). Jetzt kann die Verwaltung mit dem Kommando 'q' beendet werden und die erzeugte Datei als "botfs.img" (wichtig: auf der SD-Karte muss die Datei unbedingt "botfs.img" heissen!) auf die SD-Karte (erste Partition) kopiert werden.<br/>
 <br/>
</li>
</ul>
</li>
</ul>
<p>Benutzung:<br/>
</p>
<ul>
<li>Der Map-Code ist jetzt (mit BOT_FS_AVAILABLE) nicht mehr darauf angewiesen, dass eine Map-Datei (MiniFAT) auf der SD-Karte bereits vorhanden ist. Sobald das BotFS-Volume einmal auf der SD-Karte eingerichtet ist (s.o.), regelt der Map-Code den Rest automatisch. Insbesondere das Loeschen einer alten Map (beim Start) geht mit BOT_FS_AVAILABLE dann auch deutlich schneller.</li>
<li>Moechte man Daten zwischen dem echten und einem simulierten Bot austauschen, kann man die "botfs.img"-Datei beliebig zwischen diesen kopieren, oder den simulierten Bot mit dem Parameter "-i" und der Image-Datei (z.B. auch direkt von der eingelegten SD-Karte) starten.</li>
<li>In der BotFS-Verwaltung (ueber ct-Bot(.exe) -f [Pfad zur Image-Datei] aufzurufen) zeigt das Kommando "help" eine Uebersicht aller verfuegbaren Tools an. Wird im Normalbetrieb aber eigentlich nicht benoetigt. </li>
</ul>

<p>Definiert in Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>
</div><hr/><h2>Dokumentation der Funktionen</h2>
<a class="anchor" id="a186480cb74d92ebd01adbd2e2535a631"></a><!-- doxytag: member="botfs.c::botfs_close_volume" ref="a186480cb74d92ebd01adbd2e2535a631" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void botfs_close_volume </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Beendet BotFS sauber. </p>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00729">729</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00238">botfs_close_volume_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="botcontrol_8c_source.html#l00138">ctbot_shutdown()</a> und <a class="el" href="sensor-low__pc_8c_source.html#l00060">convert_slog_file()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a186480cb74d92ebd01adbd2e2535a631_cgraph.png" border="0" usemap="#botfs_8c_a186480cb74d92ebd01adbd2e2535a631_cgraph" alt=""/></div>
<map name="botfs_8c_a186480cb74d92ebd01adbd2e2535a631_cgraph" id="botfs_8c_a186480cb74d92ebd01adbd2e2535a631_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5eab2bbbace8faac17e9a9a35719d89a"></a><!-- doxytag: member="botfs.c::botfs_create" ref="a5eab2bbbace8faac17e9a9a35719d89a" args="(const char *filename, uint16_t size, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Legt eine neue Datei an. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*filename</td><td>Dateiname </td></tr>
    <tr><td class="paramname">size</td><td>Groesse der Datei in Bloecken </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer fuer mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00318">318</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00191">botfs_acquire_lock_low()</a>, <a class="el" href="botfs_8c_source.html#l00130">botfs_mutex</a>, <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a>, <a class="el" href="botfs_8c_source.html#l00129">botfs_vol_data</a>, <a class="el" href="botfs_8c_source.html#l00615">botfs_write()</a>, <a class="el" href="botfs__config_8h_source.html#l00041">BOTFS_MAX_FILENAME</a>, <a class="el" href="botfs__config_8h_source.html#l00049">BOTFS_HEADER_SIZE</a>, <a class="el" href="botfs__config_8h_source.html#l00039">BOTFS_BLOCK_SIZE</a> und <a class="el" href="botfs-low_8c_source.html#l00225">botfs_write_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs__pc_8c_source.html#l00154">botfs_copy_file()</a>, <a class="el" href="command_8c_source.html#l00359">command_evaluate()</a>, <a class="el" href="map_8c_source.html#l00231">map_init()</a> und <a class="el" href="sensor-low_8c_source.html#l00116">bot_sens_init()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a5eab2bbbace8faac17e9a9a35719d89a_cgraph.png" border="0" usemap="#botfs_8c_a5eab2bbbace8faac17e9a9a35719d89a_cgraph" alt=""/></div>
<map name="botfs_8c_a5eab2bbbace8faac17e9a9a35719d89a_cgraph" id="botfs_8c_a5eab2bbbace8faac17e9a9a35719d89a_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5964332bb5b66e2201b3a6b26935e1af"></a><!-- doxytag: member="botfs.c::botfs_flush_used_blocks" ref="a5964332bb5b66e2201b3a6b26935e1af" args="(botfs_file_descr_t *file, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_flush_used_blocks </td>
          <td>(</td>
          <td class="paramtype">botfs_file_descr_t *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schreibt die Information ueber benutzte Bloecke in den Datei-Header. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*file</td><td>Zeiger auf Datei-Deskriptor </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer mit mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00658">658</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00209">botfs_read_low()</a>, <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a> und <a class="el" href="botfs-low_8c_source.html#l00225">botfs_write_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="command_8c_source.html#l00359">command_evaluate()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a5964332bb5b66e2201b3a6b26935e1af_cgraph.png" border="0" usemap="#botfs_8c_a5964332bb5b66e2201b3a6b26935e1af_cgraph" alt=""/></div>
<map name="botfs_8c_a5964332bb5b66e2201b3a6b26935e1af_cgraph" id="botfs_8c_a5964332bb5b66e2201b3a6b26935e1af_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab1b873903671002d1b01240d6d800f55"></a><!-- doxytag: member="botfs.c::botfs_get_startsector" ref="ab1b873903671002d1b01240d6d800f55" args="(botfs_file_descr_t *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t botfs_get_startsector </td>
          <td>(</td>
          <td class="paramtype">botfs_file_descr_t *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gibt die physische Blockadresse des Dateianfangs zurueck. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*file</td><td>Zeiger auf Datei-Deskriptor </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>Blockadresse des Dateianfangs (Nutzdaten, nicht Header) </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00722">722</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Wird benutzt von <a class="el" href="map_8c_source.html#l00231">map_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a9452100255630000f8d3a3540f3546a3"></a><!-- doxytag: member="botfs.c::botfs_init" ref="a9452100255630000f8d3a3540f3546a3" args="(char *image, void *buffer, uint8_t create)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>create</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialisiert ein Volume. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*image</td><td>Dateiname des Images </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer fuer mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
    <tr><td class="paramname">create</td><td>Soll das Volume erzeugt werden, falls es nicht existiert? </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00140">140</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a>, <a class="el" href="botfs-low_8c_source.html#l00160">botfs_init_low()</a>, <a class="el" href="botfs-low_8c_source.html#l00209">botfs_read_low()</a>, <a class="el" href="botfs__config_8h_source.html#l00038">BOTFS_HEADER_POS</a>, <a class="el" href="botfs_8c_source.html#l00129">botfs_vol_data</a>, <a class="el" href="unionbotfs__volume__t.html#a9ddf9bc9b65152f5f1afd15b4c8aa967">botfs_volume_t::data</a>, <a class="el" href="botfs__types_8h_source.html#l00131">botfs_volume_t::ctrldata</a> und <a class="el" href="botfs-low_8c_source.html#l00177">botfs_check_volume_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="cmd-tools__pc_8c_source.html#l00107">hand_cmd_args()</a>, <a class="el" href="init_8c_source.html#l00046">ctbot_init()</a> und <a class="el" href="sensor-low__pc_8c_source.html#l00060">convert_slog_file()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a9452100255630000f8d3a3540f3546a3_cgraph.png" border="0" usemap="#botfs_8c_a9452100255630000f8d3a3540f3546a3_cgraph" alt=""/></div>
<map name="botfs_8c_a9452100255630000f8d3a3540f3546a3_cgraph" id="botfs_8c_a9452100255630000f8d3a3540f3546a3_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aad0605bba52a09999f158cb2e371a5de"></a><!-- doxytag: member="botfs.c::botfs_open" ref="aad0605bba52a09999f158cb2e371a5de" args="(const char *filename, botfs_file_descr_t *file, uint8_t mode, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">botfs_file_descr_t *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Oeffnet eine Datei. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Dateiname </td></tr>
    <tr><td class="paramname">*file</td><td>Zeiger auf Datei-Deskriptor </td></tr>
    <tr><td class="paramname">mode</td><td>Modus, in dem die Datei geoeffnet wird </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer fuer mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00400">400</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00191">botfs_acquire_lock_low()</a>, <a class="el" href="botfs_8c_source.html#l00130">botfs_mutex</a>, <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a>, <a class="el" href="botfs__config_8h_source.html#l00049">BOTFS_HEADER_SIZE</a>, <a class="el" href="botfs-low_8c_source.html#l00209">botfs_read_low()</a> und <a class="el" href="botfs__config_8h_source.html#l00061">BOTFS_MODE_W</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs__pc_8c_source.html#l00154">botfs_copy_file()</a>, <a class="el" href="botfs__pc_8c_source.html#l00235">botfs_extract_file()</a>, <a class="el" href="command_8c_source.html#l00359">command_evaluate()</a>, <a class="el" href="map_8c_source.html#l00231">map_init()</a>, <a class="el" href="sensor-low_8c_source.html#l00116">bot_sens_init()</a> und <a class="el" href="sensor-low__pc_8c_source.html#l00060">convert_slog_file()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_aad0605bba52a09999f158cb2e371a5de_cgraph.png" border="0" usemap="#botfs_8c_aad0605bba52a09999f158cb2e371a5de_cgraph" alt=""/></div>
<map name="botfs_8c_aad0605bba52a09999f158cb2e371a5de_cgraph" id="botfs_8c_aad0605bba52a09999f158cb2e371a5de_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a71348fbe8ed02ee7b07b6ab789a400ab"></a><!-- doxytag: member="botfs.c::botfs_read" ref="a71348fbe8ed02ee7b07b6ab789a400ab" args="(botfs_file_descr_t *file, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_read </td>
          <td>(</td>
          <td class="paramtype">botfs_file_descr_t *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Liest BOTFS_BLOCK_SIZE Bytes aus einer Datei in einen Puffer. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*file</td><td>Zeiger auf Datei-Deskriptor </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer fuer mindestens BOTFS_BLOCK_SIZE Byte, in die Daten geschrieben werden </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00590">590</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a> und <a class="el" href="botfs-low_8c_source.html#l00209">botfs_read_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs__pc_8c_source.html#l00235">botfs_extract_file()</a>, <a class="el" href="botfs__pc_8c_source.html#l00282">botfs_readdir()</a>, <a class="el" href="botfs__pc_8c_source.html#l00317">botfs_print_freelist()</a>, <a class="el" href="map_8c_source.html#l00231">map_init()</a> und <a class="el" href="sensor-low__pc_8c_source.html#l00060">convert_slog_file()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a71348fbe8ed02ee7b07b6ab789a400ab_cgraph.png" border="0" usemap="#botfs_8c_a71348fbe8ed02ee7b07b6ab789a400ab_cgraph" alt=""/></div>
<map name="botfs_8c_a71348fbe8ed02ee7b07b6ab789a400ab_cgraph" id="botfs_8c_a71348fbe8ed02ee7b07b6ab789a400ab_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4f5aa83fae2a2682310842df4c8458e0"></a><!-- doxytag: member="botfs.c::botfs_read_header_data" ref="a4f5aa83fae2a2682310842df4c8458e0" args="(botfs_file_descr_t *file, uint8_t **headerdata, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_read_header_data </td>
          <td>(</td>
          <td class="paramtype">botfs_file_descr_t *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>headerdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Liest die frei verwendbaren Header-Daten einer Datei aus. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*file</td><td>Zeiger auf Datei-Deskriptor </td></tr>
    <tr><td class="paramname">*headerdata</td><td>Zeiger auf die gewuenschten Header-Daten (liegen in buffer[]) </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer mit mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00687">687</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00209">botfs_read_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="map_8c_source.html#l00231">map_init()</a>, <a class="el" href="sensor-low_8c_source.html#l00116">bot_sens_init()</a> und <a class="el" href="sensor-low__pc_8c_source.html#l00060">convert_slog_file()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a4f5aa83fae2a2682310842df4c8458e0_cgraph.png" border="0" usemap="#botfs_8c_a4f5aa83fae2a2682310842df4c8458e0_cgraph" alt=""/></div>
<map name="botfs_8c_a4f5aa83fae2a2682310842df4c8458e0_cgraph" id="botfs_8c_a4f5aa83fae2a2682310842df4c8458e0_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a425c8a53f498374adef8744291c8aa16"></a><!-- doxytag: member="botfs.c::botfs_rename" ref="a425c8a53f498374adef8744291c8aa16" args="(const char *filename, const char *new_name, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_rename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Benennt eine Datei um. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*filename</td><td>Dateiname </td></tr>
    <tr><td class="paramname">*new_name</td><td>Neuer Dateiname </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer fuer mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler</dd></dl>
<p>Datei new_name wird geloescht, falls sie bereits existiert. </p>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00534">534</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00191">botfs_acquire_lock_low()</a>, <a class="el" href="botfs_8c_source.html#l00130">botfs_mutex</a>, <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a>, <a class="el" href="botfs_8c_source.html#l00442">botfs_unlink()</a>, <a class="el" href="botfs__config_8h_source.html#l00041">BOTFS_MAX_FILENAME</a>, <a class="el" href="botfs_8c_source.html#l00129">botfs_vol_data</a> und <a class="el" href="botfs_8c_source.html#l00615">botfs_write()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a425c8a53f498374adef8744291c8aa16_cgraph.png" border="0" usemap="#botfs_8c_a425c8a53f498374adef8744291c8aa16_cgraph" alt=""/></div>
<map name="botfs_8c_a425c8a53f498374adef8744291c8aa16_cgraph" id="botfs_8c_a425c8a53f498374adef8744291c8aa16_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a51db2e9a9426dc9edb351cc81edd7a70"></a><!-- doxytag: member="botfs.c::botfs_unlink" ref="a51db2e9a9426dc9edb351cc81edd7a70" args="(const char *filename, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_unlink </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Entfernt eine Datei. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*filename</td><td>Dateiname </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer fuer mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00442">442</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00191">botfs_acquire_lock_low()</a>, <a class="el" href="botfs_8c_source.html#l00130">botfs_mutex</a>, <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a>, <a class="el" href="botfs_8c_source.html#l00129">botfs_vol_data</a>, <a class="el" href="botfs_8c_source.html#l00615">botfs_write()</a> und <a class="el" href="botfs-low_8c_source.html#l00209">botfs_read_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs_8c_source.html#l00534">botfs_rename()</a>, <a class="el" href="botfs__pc_8c_source.html#l00154">botfs_copy_file()</a>, <a class="el" href="command_8c_source.html#l00359">command_evaluate()</a> und <a class="el" href="map_8c_source.html#l00231">map_init()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a51db2e9a9426dc9edb351cc81edd7a70_cgraph.png" border="0" usemap="#botfs_8c_a51db2e9a9426dc9edb351cc81edd7a70_cgraph" alt=""/></div>
<map name="botfs_8c_a51db2e9a9426dc9edb351cc81edd7a70_cgraph" id="botfs_8c_a51db2e9a9426dc9edb351cc81edd7a70_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afe7539a83c840b120ef8996557fd0e9a"></a><!-- doxytag: member="botfs.c::botfs_write" ref="afe7539a83c840b120ef8996557fd0e9a" args="(botfs_file_descr_t *file, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_write </td>
          <td>(</td>
          <td class="paramtype">botfs_file_descr_t *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schreibt BOTFS_BLOCK_SIZE Bytes aus einem Puffer in eine Datei. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*file</td><td>Zeiger auf Datei-Deskriptor </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer mit mindestens BOTFS_BLOCK_SIZE Byte, dessen Daten in die Datei geschrieben werden </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler </dd></dl>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00615">615</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs__config_8h_source.html#l00059">BOTFS_MODE_r</a>, <a class="el" href="botfs_8h_source.html#l00053">PRINT_MSG</a>, <a class="el" href="botfs-low_8c_source.html#l00225">botfs_write_low()</a> und <a class="el" href="botfs__config_8h_source.html#l00039">BOTFS_BLOCK_SIZE</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs_8c_source.html#l00318">botfs_create()</a>, <a class="el" href="botfs_8c_source.html#l00442">botfs_unlink()</a>, <a class="el" href="botfs_8c_source.html#l00534">botfs_rename()</a>, <a class="el" href="botfs__pc_8c_source.html#l00154">botfs_copy_file()</a>, <a class="el" href="command_8c_source.html#l00359">command_evaluate()</a>, <a class="el" href="map_8c_source.html#l01775">map_read()</a> und <a class="el" href="sensor-low_8c_source.html#l00169">bot_sens()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_afe7539a83c840b120ef8996557fd0e9a_cgraph.png" border="0" usemap="#botfs_8c_afe7539a83c840b120ef8996557fd0e9a_cgraph" alt=""/></div>
<map name="botfs_8c_afe7539a83c840b120ef8996557fd0e9a_cgraph" id="botfs_8c_afe7539a83c840b120ef8996557fd0e9a_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4211d1027e05944d4aff015446e01b62"></a><!-- doxytag: member="botfs.c::botfs_write_header_data" ref="a4211d1027e05944d4aff015446e01b62" args="(botfs_file_descr_t *file, void *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t botfs_write_header_data </td>
          <td>(</td>
          <td class="paramtype">botfs_file_descr_t *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schreib die frei verwendbaren Header-Daten einer Datei in den Header. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*file</td><td>Zeiger auf Datei-Deskriptor </td></tr>
    <tr><td class="paramname">*buffer</td><td>Puffer mit mindestens BOTFS_BLOCK_SIZE Byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>0, falls kein Fehler</dd></dl>
<p>buffer muss vorher durch <a class="el" href="botfs_8c.html#a4f5aa83fae2a2682310842df4c8458e0" title="Liest die frei verwendbaren Header-Daten einer Datei aus.">botfs_read_header_data()</a> mit den kompletten Header-Daten gefuellt worden sein! </p>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00710">710</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Benutzt <a class="el" href="botfs-low_8c_source.html#l00225">botfs_write_low()</a>.</p>

<p>Wird benutzt von <a class="el" href="map_8c_source.html#l00231">map_init()</a> und <a class="el" href="sensor-low_8c_source.html#l00116">bot_sens_init()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="botfs_8c_a4211d1027e05944d4aff015446e01b62_cgraph.png" border="0" usemap="#botfs_8c_a4211d1027e05944d4aff015446e01b62_cgraph" alt=""/></div>
<map name="botfs_8c_a4211d1027e05944d4aff015446e01b62_cgraph" id="botfs_8c_a4211d1027e05944d4aff015446e01b62_cgraph">
</map>
</div>
</p>

</div>
</div>
<hr/><h2>Variablen-Dokumentation</h2>
<a class="anchor" id="a279d0b6ca2d1b5303e53bb54fc378ebc"></a><!-- doxytag: member="botfs.c::botfs_mutex" ref="a279d0b6ca2d1b5303e53bb54fc378ebc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="botfs-low_8h.html#a1acc1c3282ce989c2fc6f71ae2ba8d99">botfs_mutex_t</a> <a class="el" href="botfs__pc_8c.html#a279d0b6ca2d1b5303e53bb54fc378ebc">botfs_mutex</a> = BOTFS_MUTEX_INITIALIZER</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>sperrt den Zugriff auf nicht threadsichere Funktionen </p>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00130">130</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs-low_8c_source.html#l00209">botfs_read_low()</a>, <a class="el" href="botfs-low_8c_source.html#l00225">botfs_write_low()</a>, <a class="el" href="botfs_8c_source.html#l00318">botfs_create()</a>, <a class="el" href="botfs_8c_source.html#l00400">botfs_open()</a>, <a class="el" href="botfs_8c_source.html#l00442">botfs_unlink()</a>, <a class="el" href="botfs_8c_source.html#l00534">botfs_rename()</a>, <a class="el" href="botfs__pc_8c_source.html#l00282">botfs_readdir()</a> und <a class="el" href="botfs__pc_8c_source.html#l00317">botfs_print_freelist()</a>.</p>

</div>
</div>
<a class="anchor" id="a2690205b7105228f95fd5a6ecae93641"></a><!-- doxytag: member="botfs.c::botfs_vol_data" ref="a2690205b7105228f95fd5a6ecae93641" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">botfs_volume_data_t <a class="el" href="botfs__pc_8c.html#a2690205b7105228f95fd5a6ecae93641">botfs_vol_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Root-Dir- und Freelist-Adresse. </p>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00129">129</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs_8c_source.html#l00140">botfs_init()</a>, <a class="el" href="botfs_8c_source.html#l00318">botfs_create()</a>, <a class="el" href="botfs_8c_source.html#l00442">botfs_unlink()</a>, <a class="el" href="botfs_8c_source.html#l00534">botfs_rename()</a>, <a class="el" href="botfs__pc_8c_source.html#l00282">botfs_readdir()</a> und <a class="el" href="botfs__pc_8c_source.html#l00317">botfs_print_freelist()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b582e0d1a6060b578f95554abecb97f"></a><!-- doxytag: member="botfs.c::botfs_volume_image_file" ref="a9b582e0d1a6060b578f95554abecb97f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="botfs_8h.html#a9b582e0d1a6060b578f95554abecb97f">botfs_volume_image_file</a> = BOTFS_IMAGE_FILENAME</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dateiname des BotFS-Volume-Images. </p>

<p>Definiert in Zeile <a class="el" href="botfs_8c_source.html#l00128">128</a> der Datei <a class="el" href="botfs_8c_source.html">botfs.c</a>.</p>

<p>Wird benutzt von <a class="el" href="cmd-tools__pc_8c_source.html#l00107">hand_cmd_args()</a> und <a class="el" href="init_8c_source.html#l00046">ctbot_init()</a>.</p>

</div>
</div>
</div>


<hr class="footer"/><address class="footer"><small>
Erzeugt am Don Aug 18 2011 12:13:05 für c't-Bot von &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5
</small></address>

</body>
</html>
