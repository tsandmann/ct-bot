<html>
	<h1>Bootloader f&uuml;r den c't-Bot</h1>
	
	<p>Wir haben den Bootloader von Martin Thomas (<a href="http://www.siwawi.arubi.uni-kl.de/avr_projects">http://www.siwawi.arubi.uni-kl.de/avr_projects</a> mit in das c't-Bot-Projekt aufgenommen. Damit dauert das Uebertragen der Hex-Files gerade noch 14 Sekunden.</p>
	F&uumlr den ATmega32 findet sich in diesem Verzeichnis bereits ein vorcompiliertes Hex-File. Diese muss man mit dem Programmierer der Wahl in den Bot &uuml;bertragen &ndash; genauso wie ein normales Hex-File f&uuml;r den c't-Bot. 
	Au√üerdem muss man die Fuse-Bits nun anders setzen: In Ponyprog muss nun ein bei BOOTRST und bei BOOTSZ0 ein Haeckchen sein. Bei BOOTSZ1 darf hingegen keines mehr sein.</p>
	<img src="ponyprog_atm32.jpg">
	
	<p>Wer statt PonyProg2000 lieber ein Kommandozeilen-Tool verwendet, um die Fuse-Bits zu setzen, findet in diesem Verzeichnis drei Hex-Dateien 
		(<a href="bootloader_hfuse.hex">bootloader_hfuse.hex</a>, <a href="bootloader_lfuse.hex">bootloader_lfuse.hex</a>, <a href="bootloader_lock.hex">bootloader_lock.hex</a>) die sich mit den Skripten im <a href="../flash_n_fuse">flash_n_fuse</a>-Verzeichnis uebertragen lassen.</p>
		

	<p>Ab jetzt wartet der Bot nach einem Reset 5 Sekunden auf eine eingehende Programmierverbindung.</p>
	
	<p>Nun kann man ueber eine RS-232- oder eine USB-2-Bot- oder eine LAN-/WLAN- (WiPort)-Verbindung den ATmega32 mit fast ejdem beliebigen Programmierprogramm mit Daten bef&uml;llen. Hier ein paat Beispiele:</p>
	
	<ul>
		<li><b>Netzwerk per WiPort:</b> ./avrdude -p m32 -c avr109 -P net:10.10.22.58:10002 -U flash:w:ct-Bot.hex:i -D -v -u -F</li>
		<li><b>USB-2-Bot auf COM3:</b> ./avrdude -p m32 -c avr109 -P com3 -U flash:w:ct-Bot.hex:i -D -v -u -F -b 57600</li>
		<li><b>USB-2-Bot unter Linux:</b> ./avrdude -p m32 -c avr109 -P /dev/ttyUSB0 -U flash:w:ct-Bot.hex:i -D -v -u -F -b 57600</li>
	</ul>
		
	<p><b>Tipps:</b> </p>
	<ul>
		<li>Wenn man den WiPort verwendet, muss man den Channel 2 
		(Serial Settings) auf 57600 Baud (8N1) stellen. Au&szlig;erdem sollte man sowohl
		 f&uuml;r den Input als auch den Output Buffer jeweils die beiden Optionen 
		"Flush .. With active connect"  und "Flush .. With passive connect" aktivieren.</li>
		<li>Achtung auch der WiPort braucht ein wenig Zeit zum Booten, es kannn also sein, dass er nicht gleich nach dem Power-on reagiert.</li>
		<li>Wenn man RS-232- oder USB-2-Bot-Verbindungen nutzt, sollte man unter Windows den COM-Port auf 57600 Baud (8N1) einstellen</li>
	</ul>
	<img src="wiport_serialsettings.jpg">
</html>
